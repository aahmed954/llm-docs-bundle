import{s as Yn,o as xn,n as Ln}from"../chunks/scheduler.8c3d61f6.js";import{S as Dn,i as An,g as r,s as a,r as d,A as qn,h as s,f as n,c as i,j as dn,u as c,x as h,k as Qn,y as J,a as l,v as o,d as p,t as g,w as m}from"../chunks/index.da70eac4.js";import{T as Pn}from"../chunks/Tip.1d9b8c37.js";import{C as T}from"../chunks/CodeBlock.a9c4becf.js";import{H as b,E as Kn}from"../chunks/index.5d4ab994.js";function On(Ct){let f,j='Learn more about other ways PyTorch 2.0 can help optimize your model in the <a href="../tutorials/fast_diffusion">Accelerate inference of text-to-image diffusion models</a> tutorial.';return{c(){f=r("p"),f.innerHTML=j},l(y){f=s(y,"P",{"data-svelte-h":!0}),h(f)!=="svelte-5loj68"&&(f.innerHTML=j)},m(y,Ht){l(y,f,Ht)},p:Ln,d(y){y&&n(f)}}}function tl(Ct){let f,j,y,Ht,U,Ft,Z,cn='ü§ó Diffusers supports the latest optimizations from <a href="https://pytorch.org/get-started/pytorch-2.0/" rel="nofollow">PyTorch 2.0</a> which include:',Qt,$,on='<li>A memory-efficient attention implementation, scaled dot product attention, without requiring any extra dependencies such as xFormers.</li> <li><a href="https://pytorch.org/tutorials/intermediate/torch_compile_tutorial.html" rel="nofollow"><code>torch.compile</code></a>, a just-in-time (JIT) compiler to provide an extra performance boost when individual models are compiled.</li>',Yt,B,pn="Both of these optimizations require PyTorch 2.0 or later and ü§ó Diffusers > 0.13.0.",xt,G,Lt,W,Dt,S,gn='<a href="https://pytorch.org/docs/master/generated/torch.nn.functional.scaled_dot_product_attention" rel="nofollow"><code>torch.nn.functional.scaled_dot_product_attention</code></a> (SDPA) is an optimized and memory-efficient attention (similar to xFormers) that automatically enables several other optimizations depending on the model inputs and GPU type. SDPA is enabled by default if you‚Äôre using PyTorch 2.0 and the latest version of ü§ó Diffusers, so you don‚Äôt need to add anything to your code.',At,X,mn='However, if you want to explicitly enable it, you can set a <a href="/docs/diffusers/v0.33.1/en/api/pipelines/overview#diffusers.DiffusionPipeline">DiffusionPipeline</a> to use <a href="/docs/diffusers/v0.33.1/en/api/attnprocessor#diffusers.models.attention_processor.AttnProcessor2_0">AttnProcessor2_0</a>:',qt,v,Pt,I,hn='SDPA should be as fast and memory efficient as <code>xFormers</code>; check the <a href="#benchmark">benchmark</a> for more details.',Kt,R,bn='In some cases - such as making the pipeline more deterministic or converting it to other formats - it may be helpful to use the vanilla attention processor, <a href="/docs/diffusers/v0.33.1/en/api/attnprocessor#diffusers.models.attention_processor.AttnProcessor">AttnProcessor</a>. To revert to <a href="/docs/diffusers/v0.33.1/en/api/attnprocessor#diffusers.models.attention_processor.AttnProcessor">AttnProcessor</a>, call the <a href="/docs/diffusers/v0.33.1/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel.set_default_attn_processor">set_default_attn_processor()</a> function on the pipeline:',Ot,_,te,k,ee,N,Mn="The <code>torch.compile</code> function can often provide an additional speed-up to your PyTorch code. In ü§ó Diffusers, it is usually best to wrap the UNet with <code>torch.compile</code> because it does most of the heavy lifting in the pipeline.",ne,V,le,E,un="Depending on GPU type, <code>torch.compile</code> can provide an <em>additional speed-up</em> of <strong>5-300x</strong> on top of SDPA! If you‚Äôre using more recent GPU architectures such as Ampere (A100, 3090), Ada (4090), and Hopper (H100), <code>torch.compile</code> is able to squeeze even more performance out of these GPUs.",ae,H,fn="Compilation requires some time to complete, so it is best suited for situations where you prepare your pipeline once and then perform the same type of inference operations multiple times. For example, calling the compiled pipeline on a different image size triggers compilation again which can be expensive.",ie,z,yn='For more information and different options about <code>torch.compile</code>, refer to the <a href="https://pytorch.org/tutorials/intermediate/torch_compile_tutorial.html" rel="nofollow"><code>torch_compile</code></a> tutorial.',re,w,se,C,de,F,Jn='We conducted a comprehensive benchmark with PyTorch 2.0‚Äôs efficient attention implementation and <code>torch.compile</code> across different GPUs and batch sizes for five of our most used pipelines. The code is benchmarked on ü§ó Diffusers v0.17.0.dev0 to optimize <code>torch.compile</code> usage (see <a href="https://github.com/huggingface/diffusers/pull/3313" rel="nofollow">here</a> for more details).',ce,Q,Tn="Expand the dropdown below to find the code used to benchmark each pipeline:",oe,M,Y,Ke,x,Oe,L,tn,D,en,A,nn,q,ln,P,an,K,rn,O,sn,tt,pe,et,wn='The graph below highlights the relative speed-ups for the <a href="/docs/diffusers/v0.33.1/en/api/pipelines/stable_diffusion/text2img#diffusers.StableDiffusionPipeline">StableDiffusionPipeline</a> across five GPU families with PyTorch 2.0 and <code>torch.compile</code> enabled. The benchmarks for the following graphs are measured in <em>number of iterations/second</em>.',ge,nt,jn='<img src="https://huggingface.co/datasets/diffusers/docs-images/resolve/main/pt2_benchmarks/t2i_speedup.png" alt="t2i_speedup"/>',me,lt,Un=`To give you an even better idea of how this speed-up holds for the other pipelines, consider the following
graph for an A100 with PyTorch 2.0 and <code>torch.compile</code>:`,he,at,Zn='<img src="https://huggingface.co/datasets/diffusers/docs-images/resolve/main/pt2_benchmarks/a100_numbers.png" alt="a100_numbers"/>',be,it,$n="In the following tables, we report our findings in terms of the <em>number of iterations/second</em>.",Me,rt,ue,st,Bn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">21.66</td> <td align="center">23.13</td> <td align="center">44.03</td> <td align="center">49.74</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">21.81</td> <td align="center">22.40</td> <td align="center">43.92</td> <td align="center">46.32</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">22.24</td> <td align="center">23.23</td> <td align="center">43.76</td> <td align="center">49.25</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">15.02</td> <td align="center">15.82</td> <td align="center">32.13</td> <td align="center">36.08</td></tr> <tr><td align="center">IF</td> <td align="center">20.21 / <br/>13.84 / <br/>24.00</td> <td align="center">20.12 / <br/>13.70 / <br/>24.03</td> <td align="center">‚ùå</td> <td align="center">97.34 / <br/>27.23 / <br/>111.66</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">8.64</td> <td align="center">9.9</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',fe,dt,ye,ct,Gn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">11.6</td> <td align="center">13.12</td> <td align="center">14.62</td> <td align="center">17.27</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">11.47</td> <td align="center">13.06</td> <td align="center">14.66</td> <td align="center">17.25</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">11.67</td> <td align="center">13.31</td> <td align="center">14.88</td> <td align="center">17.48</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">8.28</td> <td align="center">9.38</td> <td align="center">10.51</td> <td align="center">12.41</td></tr> <tr><td align="center">IF</td> <td align="center">25.02</td> <td align="center">18.04</td> <td align="center">‚ùå</td> <td align="center">48.47</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">2.44</td> <td align="center">2.74</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',Je,ot,Te,pt,Wn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">3.04</td> <td align="center">3.6</td> <td align="center">3.83</td> <td align="center">4.68</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">2.98</td> <td align="center">3.58</td> <td align="center">3.83</td> <td align="center">4.67</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">3.04</td> <td align="center">3.66</td> <td align="center">3.9</td> <td align="center">4.76</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">2.15</td> <td align="center">2.58</td> <td align="center">2.74</td> <td align="center">3.35</td></tr> <tr><td align="center">IF</td> <td align="center">8.78</td> <td align="center">9.82</td> <td align="center">‚ùå</td> <td align="center">16.77</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">0.64</td> <td align="center">0.72</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',we,gt,je,mt,Sn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">18.99</td> <td align="center">19.14</td> <td align="center">20.95</td> <td align="center">22.17</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">18.56</td> <td align="center">19.18</td> <td align="center">20.95</td> <td align="center">22.11</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">19.14</td> <td align="center">19.06</td> <td align="center">21.08</td> <td align="center">22.20</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">13.48</td> <td align="center">13.93</td> <td align="center">15.18</td> <td align="center">15.88</td></tr> <tr><td align="center">IF</td> <td align="center">20.01 / <br/>9.08 / <br/>23.34</td> <td align="center">19.79 / <br/>8.98 / <br/>24.10</td> <td align="center">‚ùå</td> <td align="center">55.75 / <br/>11.57 / <br/>57.67</td></tr></tbody>',Ue,ht,Ze,bt,Xn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">5.96</td> <td align="center">5.89</td> <td align="center">6.83</td> <td align="center">6.86</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">5.90</td> <td align="center">5.91</td> <td align="center">6.81</td> <td align="center">6.82</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">5.99</td> <td align="center">6.03</td> <td align="center">6.93</td> <td align="center">6.95</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">4.26</td> <td align="center">4.29</td> <td align="center">4.92</td> <td align="center">4.93</td></tr> <tr><td align="center">IF</td> <td align="center">15.41</td> <td align="center">14.76</td> <td align="center">‚ùå</td> <td align="center">22.95</td></tr></tbody>',$e,Mt,Be,ut,vn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">1.66</td> <td align="center">1.66</td> <td align="center">1.92</td> <td align="center">1.90</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">1.65</td> <td align="center">1.65</td> <td align="center">1.91</td> <td align="center">1.89</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">1.69</td> <td align="center">1.69</td> <td align="center">1.95</td> <td align="center">1.93</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">1.19</td> <td align="center">1.19</td> <td align="center">OOM after warmup</td> <td align="center">1.36</td></tr> <tr><td align="center">IF</td> <td align="center">5.43</td> <td align="center">5.29</td> <td align="center">‚ùå</td> <td align="center">7.06</td></tr></tbody>',Ge,ft,We,yt,In='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">6.9</td> <td align="center">6.95</td> <td align="center">7.3</td> <td align="center">7.56</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">6.84</td> <td align="center">6.99</td> <td align="center">7.04</td> <td align="center">7.55</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">6.91</td> <td align="center">6.7</td> <td align="center">7.01</td> <td align="center">7.37</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">4.89</td> <td align="center">4.86</td> <td align="center">5.35</td> <td align="center">5.48</td></tr> <tr><td align="center">IF</td> <td align="center">17.42 / <br/>2.47 / <br/>18.52</td> <td align="center">16.96 / <br/>2.45 / <br/>18.69</td> <td align="center">‚ùå</td> <td align="center">24.63 / <br/>2.47 / <br/>23.39</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">1.15</td> <td align="center">1.16</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',Se,Jt,Xe,Tt,Rn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">1.79</td> <td align="center">1.79</td> <td align="center">2.03</td> <td align="center">1.99</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">1.77</td> <td align="center">1.77</td> <td align="center">2.05</td> <td align="center">2.04</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">1.81</td> <td align="center">1.82</td> <td align="center">2.09</td> <td align="center">2.09</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">1.34</td> <td align="center">1.27</td> <td align="center">1.47</td> <td align="center">1.46</td></tr> <tr><td align="center">IF</td> <td align="center">5.79</td> <td align="center">5.61</td> <td align="center">‚ùå</td> <td align="center">7.39</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">0.288</td> <td align="center">0.289</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',ve,wt,Ie,jt,_n='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">2.34s</td> <td align="center">2.30s</td> <td align="center">OOM after 2nd iteration</td> <td align="center">1.99s</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">2.35s</td> <td align="center">2.31s</td> <td align="center">OOM after warmup</td> <td align="center">2.00s</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">2.30s</td> <td align="center">2.26s</td> <td align="center">OOM after 2nd iteration</td> <td align="center">1.95s</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">OOM after 2nd iteration</td> <td align="center">OOM after 2nd iteration</td> <td align="center">OOM after warmup</td> <td align="center">OOM after warmup</td></tr> <tr><td align="center">IF *</td> <td align="center">1.44</td> <td align="center">1.44</td> <td align="center">‚ùå</td> <td align="center">1.94</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">OOM</td> <td align="center">OOM</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',Re,Ut,_e,Zt,kn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">22.56</td> <td align="center">22.84</td> <td align="center">23.84</td> <td align="center">25.69</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">22.25</td> <td align="center">22.61</td> <td align="center">24.1</td> <td align="center">25.83</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">22.22</td> <td align="center">22.54</td> <td align="center">24.26</td> <td align="center">26.02</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">16.03</td> <td align="center">16.33</td> <td align="center">17.38</td> <td align="center">18.56</td></tr> <tr><td align="center">IF</td> <td align="center">27.08 / <br/>9.07 / <br/>31.23</td> <td align="center">26.75 / <br/>8.92 / <br/>31.47</td> <td align="center">‚ùå</td> <td align="center">68.08 / <br/>11.16 / <br/>65.29</td></tr></tbody>',ke,$t,Ne,Bt,Nn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">6.46</td> <td align="center">6.35</td> <td align="center">7.29</td> <td align="center">7.3</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">6.33</td> <td align="center">6.27</td> <td align="center">7.31</td> <td align="center">7.26</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">6.47</td> <td align="center">6.4</td> <td align="center">7.44</td> <td align="center">7.39</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">4.59</td> <td align="center">4.54</td> <td align="center">5.27</td> <td align="center">5.26</td></tr> <tr><td align="center">IF</td> <td align="center">16.81</td> <td align="center">16.62</td> <td align="center">‚ùå</td> <td align="center">21.57</td></tr></tbody>',Ve,Gt,Ee,Wt,Vn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">1.7</td> <td align="center">1.69</td> <td align="center">1.93</td> <td align="center">1.91</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">1.68</td> <td align="center">1.67</td> <td align="center">1.93</td> <td align="center">1.9</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">1.72</td> <td align="center">1.71</td> <td align="center">1.97</td> <td align="center">1.94</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">1.23</td> <td align="center">1.22</td> <td align="center">1.4</td> <td align="center">1.38</td></tr> <tr><td align="center">IF</td> <td align="center">5.01</td> <td align="center">5.00</td> <td align="center">‚ùå</td> <td align="center">6.33</td></tr></tbody>',He,St,ze,Xt,En='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">40.5</td> <td align="center">41.89</td> <td align="center">44.65</td> <td align="center">49.81</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">40.39</td> <td align="center">41.95</td> <td align="center">44.46</td> <td align="center">49.8</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">40.51</td> <td align="center">41.88</td> <td align="center">44.58</td> <td align="center">49.72</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">29.27</td> <td align="center">30.29</td> <td align="center">32.26</td> <td align="center">36.03</td></tr> <tr><td align="center">IF</td> <td align="center">69.71 / <br/>18.78 / <br/>85.49</td> <td align="center">69.13 / <br/>18.80 / <br/>85.56</td> <td align="center">‚ùå</td> <td align="center">124.60 / <br/>26.37 / <br/>138.79</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">6.8</td> <td align="center">8.18</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',Ce,vt,Fe,It,Hn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">12.62</td> <td align="center">12.84</td> <td align="center">15.32</td> <td align="center">15.59</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">12.61</td> <td align="center">12,.79</td> <td align="center">15.35</td> <td align="center">15.66</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">12.65</td> <td align="center">12.81</td> <td align="center">15.3</td> <td align="center">15.58</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">9.1</td> <td align="center">9.25</td> <td align="center">11.03</td> <td align="center">11.22</td></tr> <tr><td align="center">IF</td> <td align="center">31.88</td> <td align="center">31.14</td> <td align="center">‚ùå</td> <td align="center">43.92</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">2.19</td> <td align="center">2.35</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',Qe,Rt,Ye,_t,zn='<thead><tr><th align="center"><strong>Pipeline</strong></th> <th align="center"><strong>torch 2.0 - <br/>no compile</strong></th> <th align="center"><strong>torch nightly - <br/>no compile</strong></th> <th align="center"><strong>torch 2.0 - <br/>compile</strong></th> <th align="center"><strong>torch nightly - <br/>compile</strong></th></tr></thead> <tbody><tr><td align="center">SD - txt2img</td> <td align="center">3.17</td> <td align="center">3.2</td> <td align="center">3.84</td> <td align="center">3.85</td></tr> <tr><td align="center">SD - img2img</td> <td align="center">3.16</td> <td align="center">3.2</td> <td align="center">3.84</td> <td align="center">3.85</td></tr> <tr><td align="center">SD - inpaint</td> <td align="center">3.17</td> <td align="center">3.2</td> <td align="center">3.85</td> <td align="center">3.85</td></tr> <tr><td align="center">SD - controlnet</td> <td align="center">2.23</td> <td align="center">2.3</td> <td align="center">2.7</td> <td align="center">2.75</td></tr> <tr><td align="center">IF</td> <td align="center">9.26</td> <td align="center">9.2</td> <td align="center">‚ùå</td> <td align="center">13.31</td></tr> <tr><td align="center">SDXL - txt2img</td> <td align="center">0.52</td> <td align="center">0.53</td> <td align="center">-</td> <td align="center">-</td></tr></tbody>',xe,kt,Le,Nt,Cn='<li>Follow this <a href="https://github.com/huggingface/diffusers/pull/3313" rel="nofollow">PR</a> for more details on the environment used for conducting the benchmarks.</li> <li>For the DeepFloyd IF pipeline where batch sizes &gt; 1, we only used a batch size of &gt; 1 in the first IF pipeline for text-to-image generation and NOT for upscaling. That means the two upscaling pipelines received a batch size of 1.</li>',De,Vt,Fn='<em>Thanks to <a href="https://github.com/Chillee" rel="nofollow">Horace He</a> from the PyTorch team for their support in improving our support of <code>torch.compile()</code> in Diffusers.</em>',Ae,Et,qe,zt,Pe;return U=new b({props:{title:"PyTorch 2.0",local:"pytorch-20",headingTag:"h1"}}),G=new T({props:{code:"cGlwJTIwaW5zdGFsbCUyMC0tdXBncmFkZSUyMHRvcmNoJTIwZGlmZnVzZXJz",highlighted:"pip install --upgrade torch diffusers",wrap:!1}}),W=new b({props:{title:"Scaled dot product attention",local:"scaled-dot-product-attention",headingTag:"h2"}}),v=new T({props:{code:"JTIwJTIwaW1wb3J0JTIwdG9yY2glMEElMjAlMjBmcm9tJTIwZGlmZnVzZXJzJTIwaW1wb3J0JTIwRGlmZnVzaW9uUGlwZWxpbmUlMEElMkIlMjBmcm9tJTIwZGlmZnVzZXJzLm1vZGVscy5hdHRlbnRpb25fcHJvY2Vzc29yJTIwaW1wb3J0JTIwQXR0blByb2Nlc3NvcjJfMCUwQSUwQSUyMCUyMHBpcGUlMjAlM0QlMjBEaWZmdXNpb25QaXBlbGluZS5mcm9tX3ByZXRyYWluZWQoJTIyc3RhYmxlLWRpZmZ1c2lvbi12MS01JTJGc3RhYmxlLWRpZmZ1c2lvbi12MS01JTIyJTJDJTIwdG9yY2hfZHR5cGUlM0R0b3JjaC5mbG9hdDE2JTJDJTIwdXNlX3NhZmV0ZW5zb3JzJTNEVHJ1ZSkudG8oJTIyY3VkYSUyMiklMEElMkIlMjBwaXBlLnVuZXQuc2V0X2F0dG5fcHJvY2Vzc29yKEF0dG5Qcm9jZXNzb3IyXzAoKSklMEElMEElMjAlMjBwcm9tcHQlMjAlM0QlMjAlMjJhJTIwcGhvdG8lMjBvZiUyMGFuJTIwYXN0cm9uYXV0JTIwcmlkaW5nJTIwYSUyMGhvcnNlJTIwb24lMjBtYXJzJTIyJTBBJTIwJTIwaW1hZ2UlMjAlM0QlMjBwaXBlKHByb21wdCkuaW1hZ2VzJTVCMCU1RA==",highlighted:`  import torch
  from diffusers import DiffusionPipeline
<span class="hljs-addition">+ from diffusers.models.attention_processor import AttnProcessor2_0</span>

  pipe = DiffusionPipeline.from_pretrained(&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;, torch_dtype=torch.float16, use_safetensors=True).to(&quot;cuda&quot;)
<span class="hljs-addition">+ pipe.unet.set_attn_processor(AttnProcessor2_0())</span>

  prompt = &quot;a photo of an astronaut riding a horse on mars&quot;
  image = pipe(prompt).images[0]`,wrap:!1}}),_=new T({props:{code:"JTIwJTIwaW1wb3J0JTIwdG9yY2glMEElMjAlMjBmcm9tJTIwZGlmZnVzZXJzJTIwaW1wb3J0JTIwRGlmZnVzaW9uUGlwZWxpbmUlMEElMEElMjAlMjBwaXBlJTIwJTNEJTIwRGlmZnVzaW9uUGlwZWxpbmUuZnJvbV9wcmV0cmFpbmVkKCUyMnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyRnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyMiUyQyUyMHRvcmNoX2R0eXBlJTNEdG9yY2guZmxvYXQxNiUyQyUyMHVzZV9zYWZldGVuc29ycyUzRFRydWUpLnRvKCUyMmN1ZGElMjIpJTBBJTJCJTIwcGlwZS51bmV0LnNldF9kZWZhdWx0X2F0dG5fcHJvY2Vzc29yKCklMEElMEElMjAlMjBwcm9tcHQlMjAlM0QlMjAlMjJhJTIwcGhvdG8lMjBvZiUyMGFuJTIwYXN0cm9uYXV0JTIwcmlkaW5nJTIwYSUyMGhvcnNlJTIwb24lMjBtYXJzJTIyJTBBJTIwJTIwaW1hZ2UlMjAlM0QlMjBwaXBlKHByb21wdCkuaW1hZ2VzJTVCMCU1RA==",highlighted:`  import torch
  from diffusers import DiffusionPipeline

  pipe = DiffusionPipeline.from_pretrained(&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;, torch_dtype=torch.float16, use_safetensors=True).to(&quot;cuda&quot;)
<span class="hljs-addition">+ pipe.unet.set_default_attn_processor()</span>

  prompt = &quot;a photo of an astronaut riding a horse on mars&quot;
  image = pipe(prompt).images[0]`,wrap:!1}}),k=new b({props:{title:"torch.compile",local:"torchcompile",headingTag:"h2"}}),V=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMERpZmZ1c2lvblBpcGVsaW5lJTBBaW1wb3J0JTIwdG9yY2glMEElMEFwaXBlJTIwJTNEJTIwRGlmZnVzaW9uUGlwZWxpbmUuZnJvbV9wcmV0cmFpbmVkKCUyMnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyRnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyMiUyQyUyMHRvcmNoX2R0eXBlJTNEdG9yY2guZmxvYXQxNiUyQyUyMHVzZV9zYWZldGVuc29ycyUzRFRydWUpLnRvKCUyMmN1ZGElMjIpJTBBcGlwZS51bmV0JTIwJTNEJTIwdG9yY2guY29tcGlsZShwaXBlLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEFpbWFnZXMlMjAlM0QlMjBwaXBlKHByb21wdCUyQyUyMG51bV9pbmZlcmVuY2Vfc3RlcHMlM0RzdGVwcyUyQyUyMG51bV9pbWFnZXNfcGVyX3Byb21wdCUzRGJhdGNoX3NpemUpLmltYWdlcyU1QjAlNUQ=",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> DiffusionPipeline
<span class="hljs-keyword">import</span> torch

pipe = DiffusionPipeline.from_pretrained(<span class="hljs-string">&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;</span>, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe.unet = torch.<span class="hljs-built_in">compile</span>(pipe.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)
images = pipe(prompt, num_inference_steps=steps, num_images_per_prompt=batch_size).images[<span class="hljs-number">0</span>]`,wrap:!1}}),w=new Pn({props:{warning:!1,$$slots:{default:[On]},$$scope:{ctx:Ct}}}),C=new b({props:{title:"Benchmark",local:"benchmark",headingTag:"h2"}}),Y=new b({props:{title:"Stable Diffusion text-to-image",local:"stable-diffusion-text-to-image",headingTag:"h3"}}),x=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMERpZmZ1c2lvblBpcGVsaW5lJTBBaW1wb3J0JTIwdG9yY2glMEElMEFwYXRoJTIwJTNEJTIwJTIyc3RhYmxlLWRpZmZ1c2lvbi12MS01JTJGc3RhYmxlLWRpZmZ1c2lvbi12MS01JTIyJTBBJTBBcnVuX2NvbXBpbGUlMjAlM0QlMjBUcnVlJTIwJTIwJTIzJTIwU2V0JTIwVHJ1ZSUyMCUyRiUyMEZhbHNlJTBBJTBBcGlwZSUyMCUzRCUyMERpZmZ1c2lvblBpcGVsaW5lLmZyb21fcHJldHJhaW5lZChwYXRoJTJDJTIwdG9yY2hfZHR5cGUlM0R0b3JjaC5mbG9hdDE2JTJDJTIwdXNlX3NhZmV0ZW5zb3JzJTNEVHJ1ZSklMEFwaXBlJTIwJTNEJTIwcGlwZS50byglMjJjdWRhJTIyKSUwQXBpcGUudW5ldC50byhtZW1vcnlfZm9ybWF0JTNEdG9yY2guY2hhbm5lbHNfbGFzdCklMEElMEFpZiUyMHJ1bl9jb21waWxlJTNBJTBBJTIwJTIwJTIwJTIwcHJpbnQoJTIyUnVuJTIwdG9yY2glMjBjb21waWxlJTIyKSUwQSUyMCUyMCUyMCUyMHBpcGUudW5ldCUyMCUzRCUyMHRvcmNoLmNvbXBpbGUocGlwZS51bmV0JTJDJTIwbW9kZSUzRCUyMnJlZHVjZS1vdmVyaGVhZCUyMiUyQyUyMGZ1bGxncmFwaCUzRFRydWUpJTBBJTBBcHJvbXB0JTIwJTNEJTIwJTIyZ2hpYmxpJTIwc3R5bGUlMkMlMjBhJTIwZmFudGFzeSUyMGxhbmRzY2FwZSUyMHdpdGglMjBjYXN0bGVzJTIyJTBBJTBBZm9yJTIwXyUyMGluJTIwcmFuZ2UoMyklM0ElMEElMjAlMjAlMjAlMjBpbWFnZXMlMjAlM0QlMjBwaXBlKHByb21wdCUzRHByb21wdCkuaW1hZ2Vz",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> DiffusionPipeline
<span class="hljs-keyword">import</span> torch

path = <span class="hljs-string">&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;</span>

run_compile = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Set True / False</span>

pipe = DiffusionPipeline.from_pretrained(path, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe = pipe.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe.unet.to(memory_format=torch.channels_last)

<span class="hljs-keyword">if</span> run_compile:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Run torch compile&quot;</span>)
    pipe.unet = torch.<span class="hljs-built_in">compile</span>(pipe.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;ghibli style, a fantasy landscape with castles&quot;</span>

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    images = pipe(prompt=prompt).images`,wrap:!1}}),L=new b({props:{title:"Stable Diffusion image-to-image",local:"stable-diffusion-image-to-image",headingTag:"h3"}}),D=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMFN0YWJsZURpZmZ1c2lvbkltZzJJbWdQaXBlbGluZSUwQWZyb20lMjBkaWZmdXNlcnMudXRpbHMlMjBpbXBvcnQlMjBsb2FkX2ltYWdlJTBBaW1wb3J0JTIwdG9yY2glMEElMEF1cmwlMjAlM0QlMjAlMjJodHRwcyUzQSUyRiUyRnJhdy5naXRodWJ1c2VyY29udGVudC5jb20lMkZDb21wVmlzJTJGc3RhYmxlLWRpZmZ1c2lvbiUyRm1haW4lMkZhc3NldHMlMkZzdGFibGUtc2FtcGxlcyUyRmltZzJpbWclMkZza2V0Y2gtbW91bnRhaW5zLWlucHV0LmpwZyUyMiUwQSUwQWluaXRfaW1hZ2UlMjAlM0QlMjBsb2FkX2ltYWdlKHVybCklMEFpbml0X2ltYWdlJTIwJTNEJTIwaW5pdF9pbWFnZS5yZXNpemUoKDUxMiUyQyUyMDUxMikpJTBBJTBBcGF0aCUyMCUzRCUyMCUyMnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyRnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyMiUwQSUwQXJ1bl9jb21waWxlJTIwJTNEJTIwVHJ1ZSUyMCUyMCUyMyUyMFNldCUyMFRydWUlMjAlMkYlMjBGYWxzZSUwQSUwQXBpcGUlMjAlM0QlMjBTdGFibGVEaWZmdXNpb25JbWcySW1nUGlwZWxpbmUuZnJvbV9wcmV0cmFpbmVkKHBhdGglMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlKSUwQXBpcGUlMjAlM0QlMjBwaXBlLnRvKCUyMmN1ZGElMjIpJTBBcGlwZS51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQSUwQWlmJTIwcnVuX2NvbXBpbGUlM0ElMEElMjAlMjAlMjAlMjBwcmludCglMjJSdW4lMjB0b3JjaCUyMGNvbXBpbGUlMjIpJTBBJTIwJTIwJTIwJTIwcGlwZS51bmV0JTIwJTNEJTIwdG9yY2guY29tcGlsZShwaXBlLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJnaGlibGklMjBzdHlsZSUyQyUyMGElMjBmYW50YXN5JTIwbGFuZHNjYXBlJTIwd2l0aCUyMGNhc3RsZXMlMjIlMEElMEFmb3IlMjBfJTIwaW4lMjByYW5nZSgzKSUzQSUwQSUyMCUyMCUyMCUyMGltYWdlJTIwJTNEJTIwcGlwZShwcm9tcHQlM0Rwcm9tcHQlMkMlMjBpbWFnZSUzRGluaXRfaW1hZ2UpLmltYWdlcyU1QjAlNUQ=",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> StableDiffusionImg2ImgPipeline
<span class="hljs-keyword">from</span> diffusers.utils <span class="hljs-keyword">import</span> load_image
<span class="hljs-keyword">import</span> torch

url = <span class="hljs-string">&quot;https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg&quot;</span>

init_image = load_image(url)
init_image = init_image.resize((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>))

path = <span class="hljs-string">&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;</span>

run_compile = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Set True / False</span>

pipe = StableDiffusionImg2ImgPipeline.from_pretrained(path, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe = pipe.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe.unet.to(memory_format=torch.channels_last)

<span class="hljs-keyword">if</span> run_compile:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Run torch compile&quot;</span>)
    pipe.unet = torch.<span class="hljs-built_in">compile</span>(pipe.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;ghibli style, a fantasy landscape with castles&quot;</span>

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    image = pipe(prompt=prompt, image=init_image).images[<span class="hljs-number">0</span>]`,wrap:!1}}),A=new b({props:{title:"Stable Diffusion inpainting",local:"stable-diffusion-inpainting",headingTag:"h3"}}),q=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMFN0YWJsZURpZmZ1c2lvbklucGFpbnRQaXBlbGluZSUwQWZyb20lMjBkaWZmdXNlcnMudXRpbHMlMjBpbXBvcnQlMjBsb2FkX2ltYWdlJTBBaW1wb3J0JTIwdG9yY2glMEElMEFpbWdfdXJsJTIwJTNEJTIwJTIyaHR0cHMlM0ElMkYlMkZyYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tJTJGQ29tcFZpcyUyRmxhdGVudC1kaWZmdXNpb24lMkZtYWluJTJGZGF0YSUyRmlucGFpbnRpbmdfZXhhbXBsZXMlMkZvdmVydHVyZS1jcmVhdGlvbnMtNXNJNmZRZ1lJdW8ucG5nJTIyJTBBbWFza191cmwlMjAlM0QlMjAlMjJodHRwcyUzQSUyRiUyRnJhdy5naXRodWJ1c2VyY29udGVudC5jb20lMkZDb21wVmlzJTJGbGF0ZW50LWRpZmZ1c2lvbiUyRm1haW4lMkZkYXRhJTJGaW5wYWludGluZ19leGFtcGxlcyUyRm92ZXJ0dXJlLWNyZWF0aW9ucy01c0k2ZlFnWUl1b19tYXNrLnBuZyUyMiUwQSUwQWluaXRfaW1hZ2UlMjAlM0QlMjBsb2FkX2ltYWdlKGltZ191cmwpLnJlc2l6ZSgoNTEyJTJDJTIwNTEyKSklMEFtYXNrX2ltYWdlJTIwJTNEJTIwbG9hZF9pbWFnZShtYXNrX3VybCkucmVzaXplKCg1MTIlMkMlMjA1MTIpKSUwQSUwQXBhdGglMjAlM0QlMjAlMjJydW53YXltbCUyRnN0YWJsZS1kaWZmdXNpb24taW5wYWludGluZyUyMiUwQSUwQXJ1bl9jb21waWxlJTIwJTNEJTIwVHJ1ZSUyMCUyMCUyMyUyMFNldCUyMFRydWUlMjAlMkYlMjBGYWxzZSUwQSUwQXBpcGUlMjAlM0QlMjBTdGFibGVEaWZmdXNpb25JbnBhaW50UGlwZWxpbmUuZnJvbV9wcmV0cmFpbmVkKHBhdGglMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlKSUwQXBpcGUlMjAlM0QlMjBwaXBlLnRvKCUyMmN1ZGElMjIpJTBBcGlwZS51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQSUwQWlmJTIwcnVuX2NvbXBpbGUlM0ElMEElMjAlMjAlMjAlMjBwcmludCglMjJSdW4lMjB0b3JjaCUyMGNvbXBpbGUlMjIpJTBBJTIwJTIwJTIwJTIwcGlwZS51bmV0JTIwJTNEJTIwdG9yY2guY29tcGlsZShwaXBlLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJnaGlibGklMjBzdHlsZSUyQyUyMGElMjBmYW50YXN5JTIwbGFuZHNjYXBlJTIwd2l0aCUyMGNhc3RsZXMlMjIlMEElMEFmb3IlMjBfJTIwaW4lMjByYW5nZSgzKSUzQSUwQSUyMCUyMCUyMCUyMGltYWdlJTIwJTNEJTIwcGlwZShwcm9tcHQlM0Rwcm9tcHQlMkMlMjBpbWFnZSUzRGluaXRfaW1hZ2UlMkMlMjBtYXNrX2ltYWdlJTNEbWFza19pbWFnZSkuaW1hZ2VzJTVCMCU1RA==",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> StableDiffusionInpaintPipeline
<span class="hljs-keyword">from</span> diffusers.utils <span class="hljs-keyword">import</span> load_image
<span class="hljs-keyword">import</span> torch

img_url = <span class="hljs-string">&quot;https://raw.githubusercontent.com/CompVis/latent-diffusion/main/data/inpainting_examples/overture-creations-5sI6fQgYIuo.png&quot;</span>
mask_url = <span class="hljs-string">&quot;https://raw.githubusercontent.com/CompVis/latent-diffusion/main/data/inpainting_examples/overture-creations-5sI6fQgYIuo_mask.png&quot;</span>

init_image = load_image(img_url).resize((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>))
mask_image = load_image(mask_url).resize((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>))

path = <span class="hljs-string">&quot;runwayml/stable-diffusion-inpainting&quot;</span>

run_compile = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Set True / False</span>

pipe = StableDiffusionInpaintPipeline.from_pretrained(path, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe = pipe.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe.unet.to(memory_format=torch.channels_last)

<span class="hljs-keyword">if</span> run_compile:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Run torch compile&quot;</span>)
    pipe.unet = torch.<span class="hljs-built_in">compile</span>(pipe.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;ghibli style, a fantasy landscape with castles&quot;</span>

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    image = pipe(prompt=prompt, image=init_image, mask_image=mask_image).images[<span class="hljs-number">0</span>]`,wrap:!1}}),P=new b({props:{title:"ControlNet",local:"controlnet",headingTag:"h3"}}),K=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMFN0YWJsZURpZmZ1c2lvbkNvbnRyb2xOZXRQaXBlbGluZSUyQyUyMENvbnRyb2xOZXRNb2RlbCUwQWZyb20lMjBkaWZmdXNlcnMudXRpbHMlMjBpbXBvcnQlMjBsb2FkX2ltYWdlJTBBaW1wb3J0JTIwdG9yY2glMEElMEF1cmwlMjAlM0QlMjAlMjJodHRwcyUzQSUyRiUyRnJhdy5naXRodWJ1c2VyY29udGVudC5jb20lMkZDb21wVmlzJTJGc3RhYmxlLWRpZmZ1c2lvbiUyRm1haW4lMkZhc3NldHMlMkZzdGFibGUtc2FtcGxlcyUyRmltZzJpbWclMkZza2V0Y2gtbW91bnRhaW5zLWlucHV0LmpwZyUyMiUwQSUwQWluaXRfaW1hZ2UlMjAlM0QlMjBsb2FkX2ltYWdlKHVybCklMEFpbml0X2ltYWdlJTIwJTNEJTIwaW5pdF9pbWFnZS5yZXNpemUoKDUxMiUyQyUyMDUxMikpJTBBJTBBcGF0aCUyMCUzRCUyMCUyMnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyRnN0YWJsZS1kaWZmdXNpb24tdjEtNSUyMiUwQSUwQXJ1bl9jb21waWxlJTIwJTNEJTIwVHJ1ZSUyMCUyMCUyMyUyMFNldCUyMFRydWUlMjAlMkYlMjBGYWxzZSUwQWNvbnRyb2xuZXQlMjAlM0QlMjBDb250cm9sTmV0TW9kZWwuZnJvbV9wcmV0cmFpbmVkKCUyMmxsbHlhc3ZpZWwlMkZzZC1jb250cm9sbmV0LWNhbm55JTIyJTJDJTIwdG9yY2hfZHR5cGUlM0R0b3JjaC5mbG9hdDE2JTJDJTIwdXNlX3NhZmV0ZW5zb3JzJTNEVHJ1ZSklMEFwaXBlJTIwJTNEJTIwU3RhYmxlRGlmZnVzaW9uQ29udHJvbE5ldFBpcGVsaW5lLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjBwYXRoJTJDJTIwY29udHJvbG5ldCUzRGNvbnRyb2xuZXQlMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlJTBBKSUwQSUwQXBpcGUlMjAlM0QlMjBwaXBlLnRvKCUyMmN1ZGElMjIpJTBBcGlwZS51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQXBpcGUuY29udHJvbG5ldC50byhtZW1vcnlfZm9ybWF0JTNEdG9yY2guY2hhbm5lbHNfbGFzdCklMEElMEFpZiUyMHJ1bl9jb21waWxlJTNBJTBBJTIwJTIwJTIwJTIwcHJpbnQoJTIyUnVuJTIwdG9yY2glMjBjb21waWxlJTIyKSUwQSUyMCUyMCUyMCUyMHBpcGUudW5ldCUyMCUzRCUyMHRvcmNoLmNvbXBpbGUocGlwZS51bmV0JTJDJTIwbW9kZSUzRCUyMnJlZHVjZS1vdmVyaGVhZCUyMiUyQyUyMGZ1bGxncmFwaCUzRFRydWUpJTBBJTIwJTIwJTIwJTIwcGlwZS5jb250cm9sbmV0JTIwJTNEJTIwdG9yY2guY29tcGlsZShwaXBlLmNvbnRyb2xuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJnaGlibGklMjBzdHlsZSUyQyUyMGElMjBmYW50YXN5JTIwbGFuZHNjYXBlJTIwd2l0aCUyMGNhc3RsZXMlMjIlMEElMEFmb3IlMjBfJTIwaW4lMjByYW5nZSgzKSUzQSUwQSUyMCUyMCUyMCUyMGltYWdlJTIwJTNEJTIwcGlwZShwcm9tcHQlM0Rwcm9tcHQlMkMlMjBpbWFnZSUzRGluaXRfaW1hZ2UpLmltYWdlcyU1QjAlNUQ=",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> StableDiffusionControlNetPipeline, ControlNetModel
<span class="hljs-keyword">from</span> diffusers.utils <span class="hljs-keyword">import</span> load_image
<span class="hljs-keyword">import</span> torch

url = <span class="hljs-string">&quot;https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg&quot;</span>

init_image = load_image(url)
init_image = init_image.resize((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>))

path = <span class="hljs-string">&quot;stable-diffusion-v1-5/stable-diffusion-v1-5&quot;</span>

run_compile = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Set True / False</span>
controlnet = ControlNetModel.from_pretrained(<span class="hljs-string">&quot;lllyasviel/sd-controlnet-canny&quot;</span>, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe = StableDiffusionControlNetPipeline.from_pretrained(
    path, controlnet=controlnet, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>
)

pipe = pipe.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe.unet.to(memory_format=torch.channels_last)
pipe.controlnet.to(memory_format=torch.channels_last)

<span class="hljs-keyword">if</span> run_compile:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Run torch compile&quot;</span>)
    pipe.unet = torch.<span class="hljs-built_in">compile</span>(pipe.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)
    pipe.controlnet = torch.<span class="hljs-built_in">compile</span>(pipe.controlnet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;ghibli style, a fantasy landscape with castles&quot;</span>

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    image = pipe(prompt=prompt, image=init_image).images[<span class="hljs-number">0</span>]`,wrap:!1}}),O=new b({props:{title:"DeepFloyd IF text-to-image + upscaling",local:"deepfloyd-if-text-to-image--upscaling",headingTag:"h3"}}),tt=new T({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMERpZmZ1c2lvblBpcGVsaW5lJTBBaW1wb3J0JTIwdG9yY2glMEElMEFydW5fY29tcGlsZSUyMCUzRCUyMFRydWUlMjAlMjAlMjMlMjBTZXQlMjBUcnVlJTIwJTJGJTIwRmFsc2UlMEElMEFwaXBlXzElMjAlM0QlMjBEaWZmdXNpb25QaXBlbGluZS5mcm9tX3ByZXRyYWluZWQoJTIyRGVlcEZsb3lkJTJGSUYtSS1NLXYxLjAlMjIlMkMlMjB2YXJpYW50JTNEJTIyZnAxNiUyMiUyQyUyMHRleHRfZW5jb2RlciUzRE5vbmUlMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlKSUwQXBpcGVfMS50byglMjJjdWRhJTIyKSUwQXBpcGVfMiUyMCUzRCUyMERpZmZ1c2lvblBpcGVsaW5lLmZyb21fcHJldHJhaW5lZCglMjJEZWVwRmxveWQlMkZJRi1JSS1NLXYxLjAlMjIlMkMlMjB2YXJpYW50JTNEJTIyZnAxNiUyMiUyQyUyMHRleHRfZW5jb2RlciUzRE5vbmUlMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlKSUwQXBpcGVfMi50byglMjJjdWRhJTIyKSUwQXBpcGVfMyUyMCUzRCUyMERpZmZ1c2lvblBpcGVsaW5lLmZyb21fcHJldHJhaW5lZCglMjJzdGFiaWxpdHlhaSUyRnN0YWJsZS1kaWZmdXNpb24teDQtdXBzY2FsZXIlMjIlMkMlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMjB1c2Vfc2FmZXRlbnNvcnMlM0RUcnVlKSUwQXBpcGVfMy50byglMjJjdWRhJTIyKSUwQSUwQSUwQXBpcGVfMS51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQXBpcGVfMi51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQXBpcGVfMy51bmV0LnRvKG1lbW9yeV9mb3JtYXQlM0R0b3JjaC5jaGFubmVsc19sYXN0KSUwQSUwQWlmJTIwcnVuX2NvbXBpbGUlM0ElMEElMjAlMjAlMjAlMjBwaXBlXzEudW5ldCUyMCUzRCUyMHRvcmNoLmNvbXBpbGUocGlwZV8xLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMjAlMjAlMjAlMjBwaXBlXzIudW5ldCUyMCUzRCUyMHRvcmNoLmNvbXBpbGUocGlwZV8yLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMjAlMjAlMjAlMjBwaXBlXzMudW5ldCUyMCUzRCUyMHRvcmNoLmNvbXBpbGUocGlwZV8zLnVuZXQlMkMlMjBtb2RlJTNEJTIycmVkdWNlLW92ZXJoZWFkJTIyJTJDJTIwZnVsbGdyYXBoJTNEVHJ1ZSklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJ0aGUlMjBibHVlJTIwaHVsayUyMiUwQSUwQXByb21wdF9lbWJlZHMlMjAlM0QlMjB0b3JjaC5yYW5kbigoMSUyQyUyMDIlMkMlMjA0MDk2KSUyQyUyMGR0eXBlJTNEdG9yY2guZmxvYXQxNiklMEFuZWdfcHJvbXB0X2VtYmVkcyUyMCUzRCUyMHRvcmNoLnJhbmRuKCgxJTJDJTIwMiUyQyUyMDQwOTYpJTJDJTIwZHR5cGUlM0R0b3JjaC5mbG9hdDE2KSUwQSUwQWZvciUyMF8lMjBpbiUyMHJhbmdlKDMpJTNBJTBBJTIwJTIwJTIwJTIwaW1hZ2VfMSUyMCUzRCUyMHBpcGVfMShwcm9tcHRfZW1iZWRzJTNEcHJvbXB0X2VtYmVkcyUyQyUyMG5lZ2F0aXZlX3Byb21wdF9lbWJlZHMlM0RuZWdfcHJvbXB0X2VtYmVkcyUyQyUyMG91dHB1dF90eXBlJTNEJTIycHQlMjIpLmltYWdlcyUwQSUyMCUyMCUyMCUyMGltYWdlXzIlMjAlM0QlMjBwaXBlXzIoaW1hZ2UlM0RpbWFnZV8xJTJDJTIwcHJvbXB0X2VtYmVkcyUzRHByb21wdF9lbWJlZHMlMkMlMjBuZWdhdGl2ZV9wcm9tcHRfZW1iZWRzJTNEbmVnX3Byb21wdF9lbWJlZHMlMkMlMjBvdXRwdXRfdHlwZSUzRCUyMnB0JTIyKS5pbWFnZXMlMEElMjAlMjAlMjAlMjBpbWFnZV8zJTIwJTNEJTIwcGlwZV8zKHByb21wdCUzRHByb21wdCUyQyUyMGltYWdlJTNEaW1hZ2VfMSUyQyUyMG5vaXNlX2xldmVsJTNEMTAwKS5pbWFnZXM=",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> DiffusionPipeline
<span class="hljs-keyword">import</span> torch

run_compile = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Set True / False</span>

pipe_1 = DiffusionPipeline.from_pretrained(<span class="hljs-string">&quot;DeepFloyd/IF-I-M-v1.0&quot;</span>, variant=<span class="hljs-string">&quot;fp16&quot;</span>, text_encoder=<span class="hljs-literal">None</span>, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe_1.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe_2 = DiffusionPipeline.from_pretrained(<span class="hljs-string">&quot;DeepFloyd/IF-II-M-v1.0&quot;</span>, variant=<span class="hljs-string">&quot;fp16&quot;</span>, text_encoder=<span class="hljs-literal">None</span>, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe_2.to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipe_3 = DiffusionPipeline.from_pretrained(<span class="hljs-string">&quot;stabilityai/stable-diffusion-x4-upscaler&quot;</span>, torch_dtype=torch.float16, use_safetensors=<span class="hljs-literal">True</span>)
pipe_3.to(<span class="hljs-string">&quot;cuda&quot;</span>)


pipe_1.unet.to(memory_format=torch.channels_last)
pipe_2.unet.to(memory_format=torch.channels_last)
pipe_3.unet.to(memory_format=torch.channels_last)

<span class="hljs-keyword">if</span> run_compile:
    pipe_1.unet = torch.<span class="hljs-built_in">compile</span>(pipe_1.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)
    pipe_2.unet = torch.<span class="hljs-built_in">compile</span>(pipe_2.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)
    pipe_3.unet = torch.<span class="hljs-built_in">compile</span>(pipe_3.unet, mode=<span class="hljs-string">&quot;reduce-overhead&quot;</span>, fullgraph=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;the blue hulk&quot;</span>

prompt_embeds = torch.randn((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4096</span>), dtype=torch.float16)
neg_prompt_embeds = torch.randn((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4096</span>), dtype=torch.float16)

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    image_1 = pipe_1(prompt_embeds=prompt_embeds, negative_prompt_embeds=neg_prompt_embeds, output_type=<span class="hljs-string">&quot;pt&quot;</span>).images
    image_2 = pipe_2(image=image_1, prompt_embeds=prompt_embeds, negative_prompt_embeds=neg_prompt_embeds, output_type=<span class="hljs-string">&quot;pt&quot;</span>).images
    image_3 = pipe_3(prompt=prompt, image=image_1, noise_level=<span class="hljs-number">100</span>).images`,wrap:!1}}),rt=new b({props:{title:"A100 (batch size: 1)",local:"a100-batch-size-1",headingTag:"h3"}}),dt=new b({props:{title:"A100 (batch size: 4)",local:"a100-batch-size-4",headingTag:"h3"}}),ot=new b({props:{title:"A100 (batch size: 16)",local:"a100-batch-size-16",headingTag:"h3"}}),gt=new b({props:{title:"V100 (batch size: 1)",local:"v100-batch-size-1",headingTag:"h3"}}),ht=new b({props:{title:"V100 (batch size: 4)",local:"v100-batch-size-4",headingTag:"h3"}}),Mt=new b({props:{title:"V100 (batch size: 16)",local:"v100-batch-size-16",headingTag:"h3"}}),ft=new b({props:{title:"T4 (batch size: 1)",local:"t4-batch-size-1",headingTag:"h3"}}),Jt=new b({props:{title:"T4 (batch size: 4)",local:"t4-batch-size-4",headingTag:"h3"}}),wt=new b({props:{title:"T4 (batch size: 16)",local:"t4-batch-size-16",headingTag:"h3"}}),Ut=new b({props:{title:"RTX 3090 (batch size: 1)",local:"rtx-3090-batch-size-1",headingTag:"h3"}}),$t=new b({props:{title:"RTX 3090 (batch size: 4)",local:"rtx-3090-batch-size-4",headingTag:"h3"}}),Gt=new b({props:{title:"RTX 3090 (batch size: 16)",local:"rtx-3090-batch-size-16",headingTag:"h3"}}),St=new b({props:{title:"RTX 4090 (batch size: 1)",local:"rtx-4090-batch-size-1",headingTag:"h3"}}),vt=new b({props:{title:"RTX 4090 (batch size: 4)",local:"rtx-4090-batch-size-4",headingTag:"h3"}}),Rt=new b({props:{title:"RTX 4090 (batch size: 16)",local:"rtx-4090-batch-size-16",headingTag:"h3"}}),kt=new b({props:{title:"Notes",local:"notes",headingTag:"h2"}}),Et=new Kn({props:{source:"https://github.com/huggingface/diffusers/blob/main/docs/source/en/optimization/torch2.0.md"}}),{c(){f=r("meta"),j=a(),y=r("p"),Ht=a(),d(U.$$.fragment),Ft=a(),Z=r("p"),Z.innerHTML=cn,Qt=a(),$=r("ol"),$.innerHTML=on,Yt=a(),B=r("p"),B.textContent=pn,xt=a(),d(G.$$.fragment),Lt=a(),d(W.$$.fragment),Dt=a(),S=r("p"),S.innerHTML=gn,At=a(),X=r("p"),X.innerHTML=mn,qt=a(),d(v.$$.fragment),Pt=a(),I=r("p"),I.innerHTML=hn,Kt=a(),R=r("p"),R.innerHTML=bn,Ot=a(),d(_.$$.fragment),te=a(),d(k.$$.fragment),ee=a(),N=r("p"),N.innerHTML=Mn,ne=a(),d(V.$$.fragment),le=a(),E=r("p"),E.innerHTML=un,ae=a(),H=r("p"),H.textContent=fn,ie=a(),z=r("p"),z.innerHTML=yn,re=a(),d(w.$$.fragment),se=a(),d(C.$$.fragment),de=a(),F=r("p"),F.innerHTML=Jn,ce=a(),Q=r("p"),Q.textContent=Tn,oe=a(),M=r("details"),d(Y.$$.fragment),Ke=a(),d(x.$$.fragment),Oe=a(),d(L.$$.fragment),tn=a(),d(D.$$.fragment),en=a(),d(A.$$.fragment),nn=a(),d(q.$$.fragment),ln=a(),d(P.$$.fragment),an=a(),d(K.$$.fragment),rn=a(),d(O.$$.fragment),sn=a(),d(tt.$$.fragment),pe=a(),et=r("p"),et.innerHTML=wn,ge=a(),nt=r("p"),nt.innerHTML=jn,me=a(),lt=r("p"),lt.innerHTML=Un,he=a(),at=r("p"),at.innerHTML=Zn,be=a(),it=r("p"),it.innerHTML=$n,Me=a(),d(rt.$$.fragment),ue=a(),st=r("table"),st.innerHTML=Bn,fe=a(),d(dt.$$.fragment),ye=a(),ct=r("table"),ct.innerHTML=Gn,Je=a(),d(ot.$$.fragment),Te=a(),pt=r("table"),pt.innerHTML=Wn,we=a(),d(gt.$$.fragment),je=a(),mt=r("table"),mt.innerHTML=Sn,Ue=a(),d(ht.$$.fragment),Ze=a(),bt=r("table"),bt.innerHTML=Xn,$e=a(),d(Mt.$$.fragment),Be=a(),ut=r("table"),ut.innerHTML=vn,Ge=a(),d(ft.$$.fragment),We=a(),yt=r("table"),yt.innerHTML=In,Se=a(),d(Jt.$$.fragment),Xe=a(),Tt=r("table"),Tt.innerHTML=Rn,ve=a(),d(wt.$$.fragment),Ie=a(),jt=r("table"),jt.innerHTML=_n,Re=a(),d(Ut.$$.fragment),_e=a(),Zt=r("table"),Zt.innerHTML=kn,ke=a(),d($t.$$.fragment),Ne=a(),Bt=r("table"),Bt.innerHTML=Nn,Ve=a(),d(Gt.$$.fragment),Ee=a(),Wt=r("table"),Wt.innerHTML=Vn,He=a(),d(St.$$.fragment),ze=a(),Xt=r("table"),Xt.innerHTML=En,Ce=a(),d(vt.$$.fragment),Fe=a(),It=r("table"),It.innerHTML=Hn,Qe=a(),d(Rt.$$.fragment),Ye=a(),_t=r("table"),_t.innerHTML=zn,xe=a(),d(kt.$$.fragment),Le=a(),Nt=r("ul"),Nt.innerHTML=Cn,De=a(),Vt=r("p"),Vt.innerHTML=Fn,Ae=a(),d(Et.$$.fragment),qe=a(),zt=r("p"),this.h()},l(t){const e=qn("svelte-u9bgzb",document.head);f=s(e,"META",{name:!0,content:!0}),e.forEach(n),j=i(t),y=s(t,"P",{}),dn(y).forEach(n),Ht=i(t),c(U.$$.fragment,t),Ft=i(t),Z=s(t,"P",{"data-svelte-h":!0}),h(Z)!=="svelte-15wmwhw"&&(Z.innerHTML=cn),Qt=i(t),$=s(t,"OL",{"data-svelte-h":!0}),h($)!=="svelte-19p82dc"&&($.innerHTML=on),Yt=i(t),B=s(t,"P",{"data-svelte-h":!0}),h(B)!=="svelte-1u908i1"&&(B.textContent=pn),xt=i(t),c(G.$$.fragment,t),Lt=i(t),c(W.$$.fragment,t),Dt=i(t),S=s(t,"P",{"data-svelte-h":!0}),h(S)!=="svelte-1bb69gh"&&(S.innerHTML=gn),At=i(t),X=s(t,"P",{"data-svelte-h":!0}),h(X)!=="svelte-iwmv2v"&&(X.innerHTML=mn),qt=i(t),c(v.$$.fragment,t),Pt=i(t),I=s(t,"P",{"data-svelte-h":!0}),h(I)!=="svelte-psbnvm"&&(I.innerHTML=hn),Kt=i(t),R=s(t,"P",{"data-svelte-h":!0}),h(R)!=="svelte-10m5d20"&&(R.innerHTML=bn),Ot=i(t),c(_.$$.fragment,t),te=i(t),c(k.$$.fragment,t),ee=i(t),N=s(t,"P",{"data-svelte-h":!0}),h(N)!=="svelte-1vjh5md"&&(N.innerHTML=Mn),ne=i(t),c(V.$$.fragment,t),le=i(t),E=s(t,"P",{"data-svelte-h":!0}),h(E)!=="svelte-mm2mnz"&&(E.innerHTML=un),ae=i(t),H=s(t,"P",{"data-svelte-h":!0}),h(H)!=="svelte-19iy5vt"&&(H.textContent=fn),ie=i(t),z=s(t,"P",{"data-svelte-h":!0}),h(z)!=="svelte-yz7oqo"&&(z.innerHTML=yn),re=i(t),c(w.$$.fragment,t),se=i(t),c(C.$$.fragment,t),de=i(t),F=s(t,"P",{"data-svelte-h":!0}),h(F)!=="svelte-km3nc0"&&(F.innerHTML=Jn),ce=i(t),Q=s(t,"P",{"data-svelte-h":!0}),h(Q)!=="svelte-pe5bn7"&&(Q.textContent=Tn),oe=i(t),M=s(t,"DETAILS",{});var u=dn(M);c(Y.$$.fragment,u),Ke=i(u),c(x.$$.fragment,u),Oe=i(u),c(L.$$.fragment,u),tn=i(u),c(D.$$.fragment,u),en=i(u),c(A.$$.fragment,u),nn=i(u),c(q.$$.fragment,u),ln=i(u),c(P.$$.fragment,u),an=i(u),c(K.$$.fragment,u),rn=i(u),c(O.$$.fragment,u),sn=i(u),c(tt.$$.fragment,u),u.forEach(n),pe=i(t),et=s(t,"P",{"data-svelte-h":!0}),h(et)!=="svelte-mce1yh"&&(et.innerHTML=wn),ge=i(t),nt=s(t,"P",{"data-svelte-h":!0}),h(nt)!=="svelte-1sjwyaz"&&(nt.innerHTML=jn),me=i(t),lt=s(t,"P",{"data-svelte-h":!0}),h(lt)!=="svelte-1zzsz7"&&(lt.innerHTML=Un),he=i(t),at=s(t,"P",{"data-svelte-h":!0}),h(at)!=="svelte-19p9vzv"&&(at.innerHTML=Zn),be=i(t),it=s(t,"P",{"data-svelte-h":!0}),h(it)!=="svelte-18iwyus"&&(it.innerHTML=$n),Me=i(t),c(rt.$$.fragment,t),ue=i(t),st=s(t,"TABLE",{"data-svelte-h":!0}),h(st)!=="svelte-14f48w"&&(st.innerHTML=Bn),fe=i(t),c(dt.$$.fragment,t),ye=i(t),ct=s(t,"TABLE",{"data-svelte-h":!0}),h(ct)!=="svelte-19bbd89"&&(ct.innerHTML=Gn),Je=i(t),c(ot.$$.fragment,t),Te=i(t),pt=s(t,"TABLE",{"data-svelte-h":!0}),h(pt)!=="svelte-cd9a2o"&&(pt.innerHTML=Wn),we=i(t),c(gt.$$.fragment,t),je=i(t),mt=s(t,"TABLE",{"data-svelte-h":!0}),h(mt)!=="svelte-9j8rj7"&&(mt.innerHTML=Sn),Ue=i(t),c(ht.$$.fragment,t),Ze=i(t),bt=s(t,"TABLE",{"data-svelte-h":!0}),h(bt)!=="svelte-1xs3uwi"&&(bt.innerHTML=Xn),$e=i(t),c(Mt.$$.fragment,t),Be=i(t),ut=s(t,"TABLE",{"data-svelte-h":!0}),h(ut)!=="svelte-1elkjwp"&&(ut.innerHTML=vn),Ge=i(t),c(ft.$$.fragment,t),We=i(t),yt=s(t,"TABLE",{"data-svelte-h":!0}),h(yt)!=="svelte-sqqgka"&&(yt.innerHTML=In),Se=i(t),c(Jt.$$.fragment,t),Xe=i(t),Tt=s(t,"TABLE",{"data-svelte-h":!0}),h(Tt)!=="svelte-15f755w"&&(Tt.innerHTML=Rn),ve=i(t),c(wt.$$.fragment,t),Ie=i(t),jt=s(t,"TABLE",{"data-svelte-h":!0}),h(jt)!=="svelte-uuno4d"&&(jt.innerHTML=_n),Re=i(t),c(Ut.$$.fragment,t),_e=i(t),Zt=s(t,"TABLE",{"data-svelte-h":!0}),h(Zt)!=="svelte-1hbo08l"&&(Zt.innerHTML=kn),ke=i(t),c($t.$$.fragment,t),Ne=i(t),Bt=s(t,"TABLE",{"data-svelte-h":!0}),h(Bt)!=="svelte-abi9u4"&&(Bt.innerHTML=Nn),Ve=i(t),c(Gt.$$.fragment,t),Ee=i(t),Wt=s(t,"TABLE",{"data-svelte-h":!0}),h(Wt)!=="svelte-11m8i0f"&&(Wt.innerHTML=Vn),He=i(t),c(St.$$.fragment,t),ze=i(t),Xt=s(t,"TABLE",{"data-svelte-h":!0}),h(Xt)!=="svelte-1i4s3fg"&&(Xt.innerHTML=En),Ce=i(t),c(vt.$$.fragment,t),Fe=i(t),It=s(t,"TABLE",{"data-svelte-h":!0}),h(It)!=="svelte-13cqeai"&&(It.innerHTML=Hn),Qe=i(t),c(Rt.$$.fragment,t),Ye=i(t),_t=s(t,"TABLE",{"data-svelte-h":!0}),h(_t)!=="svelte-16al08t"&&(_t.innerHTML=zn),xe=i(t),c(kt.$$.fragment,t),Le=i(t),Nt=s(t,"UL",{"data-svelte-h":!0}),h(Nt)!=="svelte-1xg6qk7"&&(Nt.innerHTML=Cn),De=i(t),Vt=s(t,"P",{"data-svelte-h":!0}),h(Vt)!=="svelte-7zliwv"&&(Vt.innerHTML=Fn),Ae=i(t),c(Et.$$.fragment,t),qe=i(t),zt=s(t,"P",{}),dn(zt).forEach(n),this.h()},h(){Qn(f,"name","hf:doc:metadata"),Qn(f,"content",el)},m(t,e){J(document.head,f),l(t,j,e),l(t,y,e),l(t,Ht,e),o(U,t,e),l(t,Ft,e),l(t,Z,e),l(t,Qt,e),l(t,$,e),l(t,Yt,e),l(t,B,e),l(t,xt,e),o(G,t,e),l(t,Lt,e),o(W,t,e),l(t,Dt,e),l(t,S,e),l(t,At,e),l(t,X,e),l(t,qt,e),o(v,t,e),l(t,Pt,e),l(t,I,e),l(t,Kt,e),l(t,R,e),l(t,Ot,e),o(_,t,e),l(t,te,e),o(k,t,e),l(t,ee,e),l(t,N,e),l(t,ne,e),o(V,t,e),l(t,le,e),l(t,E,e),l(t,ae,e),l(t,H,e),l(t,ie,e),l(t,z,e),l(t,re,e),o(w,t,e),l(t,se,e),o(C,t,e),l(t,de,e),l(t,F,e),l(t,ce,e),l(t,Q,e),l(t,oe,e),l(t,M,e),o(Y,M,null),J(M,Ke),o(x,M,null),J(M,Oe),o(L,M,null),J(M,tn),o(D,M,null),J(M,en),o(A,M,null),J(M,nn),o(q,M,null),J(M,ln),o(P,M,null),J(M,an),o(K,M,null),J(M,rn),o(O,M,null),J(M,sn),o(tt,M,null),l(t,pe,e),l(t,et,e),l(t,ge,e),l(t,nt,e),l(t,me,e),l(t,lt,e),l(t,he,e),l(t,at,e),l(t,be,e),l(t,it,e),l(t,Me,e),o(rt,t,e),l(t,ue,e),l(t,st,e),l(t,fe,e),o(dt,t,e),l(t,ye,e),l(t,ct,e),l(t,Je,e),o(ot,t,e),l(t,Te,e),l(t,pt,e),l(t,we,e),o(gt,t,e),l(t,je,e),l(t,mt,e),l(t,Ue,e),o(ht,t,e),l(t,Ze,e),l(t,bt,e),l(t,$e,e),o(Mt,t,e),l(t,Be,e),l(t,ut,e),l(t,Ge,e),o(ft,t,e),l(t,We,e),l(t,yt,e),l(t,Se,e),o(Jt,t,e),l(t,Xe,e),l(t,Tt,e),l(t,ve,e),o(wt,t,e),l(t,Ie,e),l(t,jt,e),l(t,Re,e),o(Ut,t,e),l(t,_e,e),l(t,Zt,e),l(t,ke,e),o($t,t,e),l(t,Ne,e),l(t,Bt,e),l(t,Ve,e),o(Gt,t,e),l(t,Ee,e),l(t,Wt,e),l(t,He,e),o(St,t,e),l(t,ze,e),l(t,Xt,e),l(t,Ce,e),o(vt,t,e),l(t,Fe,e),l(t,It,e),l(t,Qe,e),o(Rt,t,e),l(t,Ye,e),l(t,_t,e),l(t,xe,e),o(kt,t,e),l(t,Le,e),l(t,Nt,e),l(t,De,e),l(t,Vt,e),l(t,Ae,e),o(Et,t,e),l(t,qe,e),l(t,zt,e),Pe=!0},p(t,[e]){const u={};e&2&&(u.$$scope={dirty:e,ctx:t}),w.$set(u)},i(t){Pe||(p(U.$$.fragment,t),p(G.$$.fragment,t),p(W.$$.fragment,t),p(v.$$.fragment,t),p(_.$$.fragment,t),p(k.$$.fragment,t),p(V.$$.fragment,t),p(w.$$.fragment,t),p(C.$$.fragment,t),p(Y.$$.fragment,t),p(x.$$.fragment,t),p(L.$$.fragment,t),p(D.$$.fragment,t),p(A.$$.fragment,t),p(q.$$.fragment,t),p(P.$$.fragment,t),p(K.$$.fragment,t),p(O.$$.fragment,t),p(tt.$$.fragment,t),p(rt.$$.fragment,t),p(dt.$$.fragment,t),p(ot.$$.fragment,t),p(gt.$$.fragment,t),p(ht.$$.fragment,t),p(Mt.$$.fragment,t),p(ft.$$.fragment,t),p(Jt.$$.fragment,t),p(wt.$$.fragment,t),p(Ut.$$.fragment,t),p($t.$$.fragment,t),p(Gt.$$.fragment,t),p(St.$$.fragment,t),p(vt.$$.fragment,t),p(Rt.$$.fragment,t),p(kt.$$.fragment,t),p(Et.$$.fragment,t),Pe=!0)},o(t){g(U.$$.fragment,t),g(G.$$.fragment,t),g(W.$$.fragment,t),g(v.$$.fragment,t),g(_.$$.fragment,t),g(k.$$.fragment,t),g(V.$$.fragment,t),g(w.$$.fragment,t),g(C.$$.fragment,t),g(Y.$$.fragment,t),g(x.$$.fragment,t),g(L.$$.fragment,t),g(D.$$.fragment,t),g(A.$$.fragment,t),g(q.$$.fragment,t),g(P.$$.fragment,t),g(K.$$.fragment,t),g(O.$$.fragment,t),g(tt.$$.fragment,t),g(rt.$$.fragment,t),g(dt.$$.fragment,t),g(ot.$$.fragment,t),g(gt.$$.fragment,t),g(ht.$$.fragment,t),g(Mt.$$.fragment,t),g(ft.$$.fragment,t),g(Jt.$$.fragment,t),g(wt.$$.fragment,t),g(Ut.$$.fragment,t),g($t.$$.fragment,t),g(Gt.$$.fragment,t),g(St.$$.fragment,t),g(vt.$$.fragment,t),g(Rt.$$.fragment,t),g(kt.$$.fragment,t),g(Et.$$.fragment,t),Pe=!1},d(t){t&&(n(j),n(y),n(Ht),n(Ft),n(Z),n(Qt),n($),n(Yt),n(B),n(xt),n(Lt),n(Dt),n(S),n(At),n(X),n(qt),n(Pt),n(I),n(Kt),n(R),n(Ot),n(te),n(ee),n(N),n(ne),n(le),n(E),n(ae),n(H),n(ie),n(z),n(re),n(se),n(de),n(F),n(ce),n(Q),n(oe),n(M),n(pe),n(et),n(ge),n(nt),n(me),n(lt),n(he),n(at),n(be),n(it),n(Me),n(ue),n(st),n(fe),n(ye),n(ct),n(Je),n(Te),n(pt),n(we),n(je),n(mt),n(Ue),n(Ze),n(bt),n($e),n(Be),n(ut),n(Ge),n(We),n(yt),n(Se),n(Xe),n(Tt),n(ve),n(Ie),n(jt),n(Re),n(_e),n(Zt),n(ke),n(Ne),n(Bt),n(Ve),n(Ee),n(Wt),n(He),n(ze),n(Xt),n(Ce),n(Fe),n(It),n(Qe),n(Ye),n(_t),n(xe),n(Le),n(Nt),n(De),n(Vt),n(Ae),n(qe),n(zt)),n(f),m(U,t),m(G,t),m(W,t),m(v,t),m(_,t),m(k,t),m(V,t),m(w,t),m(C,t),m(Y),m(x),m(L),m(D),m(A),m(q),m(P),m(K),m(O),m(tt),m(rt,t),m(dt,t),m(ot,t),m(gt,t),m(ht,t),m(Mt,t),m(ft,t),m(Jt,t),m(wt,t),m(Ut,t),m($t,t),m(Gt,t),m(St,t),m(vt,t),m(Rt,t),m(kt,t),m(Et,t)}}}const el='{"title":"PyTorch 2.0","local":"pytorch-20","sections":[{"title":"Scaled dot product attention","local":"scaled-dot-product-attention","sections":[],"depth":2},{"title":"torch.compile","local":"torchcompile","sections":[],"depth":2},{"title":"Benchmark","local":"benchmark","sections":[{"title":"Stable Diffusion text-to-image","local":"stable-diffusion-text-to-image","sections":[],"depth":3},{"title":"Stable Diffusion image-to-image","local":"stable-diffusion-image-to-image","sections":[],"depth":3},{"title":"Stable Diffusion inpainting","local":"stable-diffusion-inpainting","sections":[],"depth":3},{"title":"ControlNet","local":"controlnet","sections":[],"depth":3},{"title":"DeepFloyd IF text-to-image + upscaling","local":"deepfloyd-if-text-to-image--upscaling","sections":[],"depth":3},{"title":"A100 (batch size: 1)","local":"a100-batch-size-1","sections":[],"depth":3},{"title":"A100 (batch size: 4)","local":"a100-batch-size-4","sections":[],"depth":3},{"title":"A100 (batch size: 16)","local":"a100-batch-size-16","sections":[],"depth":3},{"title":"V100 (batch size: 1)","local":"v100-batch-size-1","sections":[],"depth":3},{"title":"V100 (batch size: 4)","local":"v100-batch-size-4","sections":[],"depth":3},{"title":"V100 (batch size: 16)","local":"v100-batch-size-16","sections":[],"depth":3},{"title":"T4 (batch size: 1)","local":"t4-batch-size-1","sections":[],"depth":3},{"title":"T4 (batch size: 4)","local":"t4-batch-size-4","sections":[],"depth":3},{"title":"T4 (batch size: 16)","local":"t4-batch-size-16","sections":[],"depth":3},{"title":"RTX 3090 (batch size: 1)","local":"rtx-3090-batch-size-1","sections":[],"depth":3},{"title":"RTX 3090 (batch size: 4)","local":"rtx-3090-batch-size-4","sections":[],"depth":3},{"title":"RTX 3090 (batch size: 16)","local":"rtx-3090-batch-size-16","sections":[],"depth":3},{"title":"RTX 4090 (batch size: 1)","local":"rtx-4090-batch-size-1","sections":[],"depth":3},{"title":"RTX 4090 (batch size: 4)","local":"rtx-4090-batch-size-4","sections":[],"depth":3},{"title":"RTX 4090 (batch size: 16)","local":"rtx-4090-batch-size-16","sections":[],"depth":3}],"depth":2},{"title":"Notes","local":"notes","sections":[],"depth":2}],"depth":1}';function nl(Ct){return xn(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class dl extends Dn{constructor(f){super(),An(this,f,nl,tl,Yn,{})}}export{dl as component};
