import{s as wt,o as Jt,n as Le}from"../chunks/scheduler.8c3d61f6.js";import{S as Ut,i as bt,g as r,s as a,r as d,A as jt,h as c,f as s,c as i,j as Tt,u as h,x as o,k as ne,y as Zt,a as l,v as M,d as f,t as y,w as g}from"../chunks/index.da70eac4.js";import{T as qe}from"../chunks/Tip.1d9b8c37.js";import{C as x}from"../chunks/CodeBlock.a9c4becf.js";import{H as pe,E as vt}from"../chunks/index.5d4ab994.js";function It(U){let n,J='Diffusers currently only supports the <code>timesteps</code> and <code>sigmas</code> parameters for a select list of schedulers and pipelines. Feel free to open a <a href="https://github.com/huggingface/diffusers/issues/new/choose" rel="nofollow">feature request</a> if you want to extend these parameters to a scheduler and pipeline that does not currently support it!';return{c(){n=r("p"),n.innerHTML=J},l(u){n=c(u,"P",{"data-svelte-h":!0}),o(n)!=="svelte-1qkepy0"&&(n.innerHTML=J)},m(u,m){l(u,n,m)},p:Le,d(u){u&&s(n)}}}function Wt(U){let n,J='Refer to the scheduler API <a href="../api/schedulers/overview">overview</a> for a list of schedulers that support Karras sigmas.',u,m,T='Karras sigmas should not be used for models that weren’t trained with them. For example, the base Stable Diffusion XL model shouldn’t use Karras sigmas but the <a href="https://hf.co/Lykon/dreamshaper-xl-1-0" rel="nofollow">DreamShaperXL</a> model can since they are trained with Karras sigmas.';return{c(){n=r("p"),n.innerHTML=J,u=a(),m=r("p"),m.innerHTML=T},l(p){n=c(p,"P",{"data-svelte-h":!0}),o(n)!=="svelte-adlqce"&&(n.innerHTML=J),u=i(p),m=c(p,"P",{"data-svelte-h":!0}),o(m)!=="svelte-1uk1mrr"&&(m.innerHTML=T)},m(p,w){l(p,n,w),l(p,u,w),l(p,m,w)},p:Le,d(p){p&&(s(n),s(u),s(m))}}}function $t(U){let n,J='For inference, you need a model that has been trained with <em>v_prediction</em>. To train your own model with <em>v_prediction</em>, add the following flag to the <a href="https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py" rel="nofollow">train_text_to_image.py</a> or <a href="https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py" rel="nofollow">train_text_to_image_lora.py</a> scripts.',u,m,T;return m=new x({props:{code:"LS1wcmVkaWN0aW9uX3R5cGUlM0QlMjJ2X3ByZWRpY3Rpb24lMjI=",highlighted:'--prediction_type=<span class="hljs-string">&quot;v_prediction&quot;</span>',wrap:!1}}),{c(){n=r("p"),n.innerHTML=J,u=a(),d(m.$$.fragment)},l(p){n=c(p,"P",{"data-svelte-h":!0}),o(n)!=="svelte-1u8ajsg"&&(n.innerHTML=J),u=i(p),h(m.$$.fragment,p)},m(p,w){l(p,n,w),l(p,u,w),M(m,p,w),T=!0},p:Le,i(p){T||(f(m.$$.fragment,p),T=!0)},o(p){y(m.$$.fragment,p),T=!1},d(p){p&&(s(n),s(u)),g(m,p)}}}function xt(U){let n,J,u,m,T,p,w,Fe="The scheduler is an important component of any diffusion model because it controls the entire denoising (or sampling) process. There are many types of schedulers, some are optimized for speed and some for quality. With Diffusers, you can modify the scheduler configuration to use custom noise schedules, sigmas, and rescale the noise schedule. Changing these parameters can have profound effects on inference quality and speed.",ce,B,Ae="This guide will demonstrate how to use these features to improve inference quality.",oe,b,me,G,ue,C,Pe="The timestep or noise schedule determines the amount of noise at each sampling step. The scheduler uses this to generate an image with the corresponding amount of noise at each step. The timestep schedule is generated from the scheduler’s default configuration, but you can customize the scheduler to use new and optimized sampling schedules that aren’t in Diffusers yet.",de,V,Ke='For example, <a href="https://research.nvidia.com/labs/toronto-ai/AlignYourSteps/" rel="nofollow">Align Your Steps (AYS)</a> is a method for optimizing a sampling schedule to generate a high-quality image in as little as 10 steps. The optimal <a href="https://github.com/huggingface/diffusers/blob/a7bf77fc284810483f1e60afe34d1d27ad91ce2e/src/diffusers/schedulers/scheduling_utils.py#L51" rel="nofollow">10-step schedule</a> for Stable Diffusion XL is:',he,R,Me,S,Oe="You can use the AYS sampling schedule in a pipeline by passing it to the <code>timesteps</code> parameter.",fe,_,ye,j,et='<div><img class="rounded-xl" src="https://huggingface.co/datasets/YiYiXu/testing-images/resolve/main/ays.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">AYS timestep schedule 10 steps</figcaption></div> <div><img class="rounded-xl" src="https://huggingface.co/datasets/YiYiXu/testing-images/resolve/main/10.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">Linearly-spaced timestep schedule 10 steps</figcaption></div> <div><img class="rounded-xl" src="https://huggingface.co/datasets/YiYiXu/testing-images/resolve/main/25.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">Linearly-spaced timestep schedule 25 steps</figcaption></div>',ge,Q,Te,k,tt='The way sample steps are selected in the schedule can affect the quality of the generated image, especially with respect to <a href="#rescale-noise-schedule">rescaling the noise schedule</a>, which can enable a model to generate much brighter or darker images. Diffusers provides three timestep spacing methods:',we,H,st="<li><code>leading</code> creates evenly spaced steps</li> <li><code>linspace</code> includes the first and last steps and evenly selects the remaining intermediate steps</li> <li><code>trailing</code> only includes the last step and evenly selects the remaining intermediate steps starting from the end</li>",Je,X,lt="It is recommended to use the <code>trailing</code> spacing method because it generates higher quality images with more details when there are fewer sample steps. But the difference in quality is not as obvious for more standard sample step values.",Ue,N,be,Z,at='<div><img class="rounded-xl" src="https://huggingface.co/datasets/stevhliu/testing-images/resolve/main/trailing_spacing.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">trailing spacing after 5 steps</figcaption></div> <div><img class="rounded-xl" src="https://huggingface.co/datasets/stevhliu/testing-images/resolve/main/leading_spacing.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">leading spacing after 5 steps</figcaption></div>',je,Y,Ze,E,it="The <code>sigmas</code> parameter is the amount of noise added at each timestep according to the timestep schedule. Like the <code>timesteps</code> parameter, you can customize the <code>sigmas</code> parameter to control how much noise is added at each step. When you use a custom <code>sigmas</code> value, the <code>timesteps</code> are calculated from the custom <code>sigmas</code> value and the default scheduler configuration is ignored.",ve,z,nt='For example, you can manually pass the <a href="https://github.com/huggingface/diffusers/blob/6529ee67ec02fcf58d2fd9242164ea002b351d75/src/diffusers/schedulers/scheduling_utils.py#L55" rel="nofollow">sigmas</a> for something like the 10-step AYS schedule from before to the pipeline.',Ie,D,We,q,pt="When you take a look at the scheduler’s <code>timesteps</code> parameter, you’ll see that it is the same as the AYS timestep schedule because the <code>timestep</code> schedule is calculated from the <code>sigmas</code>.",$e,L,xe,F,Be,v,Ge,A,rt='Karras scheduler’s use the timestep schedule and sigmas from the <a href="https://hf.co/papers/2206.00364" rel="nofollow">Elucidating the Design Space of Diffusion-Based Generative Models</a> paper. This scheduler variant applies a smaller amount of noise per step as it approaches the end of the sampling process compared to other schedulers, and can increase the level of details in the generated image.',Ce,P,ct="Enable Karras sigmas by setting <code>use_karras_sigmas=True</code> in the scheduler.",Ve,K,Re,I,ot='<div><img class="rounded-xl" src="https://huggingface.co/datasets/stevhliu/testing-images/resolve/main/karras_sigmas_true.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">Karras sigmas enabled</figcaption></div> <div><img class="rounded-xl" src="https://huggingface.co/datasets/stevhliu/testing-images/resolve/main/karras_sigmas_false.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">Karras sigmas disabled</figcaption></div>',Se,O,_e,ee,mt='In the <a href="https://hf.co/papers/2305.08891" rel="nofollow">Common Diffusion Noise Schedules and Sample Steps are Flawed</a> paper, the authors discovered that common noise schedules allowed some signal to leak into the last timestep. This signal leakage at inference can cause models to only generate images with medium brightness. By enforcing a zero signal-to-noise ratio (SNR) for the timstep schedule and sampling from the last timestep, the model can be improved to generate very bright or dark images.',Qe,W,ke,te,ut='For example, load the <a href="https://hf.co/ptx0/pseudo-journey-v2" rel="nofollow">ptx0/pseudo-journey-v2</a> checkpoint which was trained with <code>v_prediction</code> and the <a href="/docs/diffusers/v0.33.1/en/api/schedulers/ddim#diffusers.DDIMScheduler">DDIMScheduler</a>. Configure the following parameters in the <a href="/docs/diffusers/v0.33.1/en/api/schedulers/ddim#diffusers.DDIMScheduler">DDIMScheduler</a>:',He,se,dt="<li><code>rescale_betas_zero_snr=True</code> to rescale the noise schedule to zero SNR</li> <li><code>timestep_spacing=&quot;trailing&quot;</code> to start sampling from the last timestep</li>",Xe,le,ht="Set <code>guidance_rescale</code> in the pipeline to prevent over-exposure. A lower value increases brightness but some of the details may appear washed out.",Ne,ae,Ye,$,Mt='<div><img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/no-zero-snr.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">default Stable Diffusion v2-1 image</figcaption></div> <div><img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/zero-snr.png"/> <figcaption class="mt-2 text-center text-sm text-gray-500">image with zero SNR and trailing timestep spacing enabled</figcaption></div>',Ee,ie,ze,re,De;return T=new pe({props:{title:"Scheduler features",local:"scheduler-features",headingTag:"h1"}}),b=new qe({props:{warning:!1,$$slots:{default:[It]},$$scope:{ctx:U}}}),G=new pe({props:{title:"Timestep schedules",local:"timestep-schedules",headingTag:"h2"}}),R=new x({props:{code:"ZnJvbSUyMGRpZmZ1c2Vycy5zY2hlZHVsZXJzJTIwaW1wb3J0JTIwQXlzU2NoZWR1bGVzJTBBJTBBc2FtcGxpbmdfc2NoZWR1bGUlMjAlM0QlMjBBeXNTY2hlZHVsZXMlNUIlMjJTdGFibGVEaWZmdXNpb25YTFRpbWVzdGVwcyUyMiU1RCUwQXByaW50KHNhbXBsaW5nX3NjaGVkdWxlKSUwQSUyMiU1Qjk5OSUyQyUyMDg0NSUyQyUyMDczMCUyQyUyMDU4NyUyQyUyMDQ0MyUyQyUyMDMxMCUyQyUyMDE5MyUyQyUyMDExNiUyQyUyMDUzJTJDJTIwMTMlNUQlMjI=",highlighted:`<span class="hljs-keyword">from</span> diffusers.schedulers <span class="hljs-keyword">import</span> AysSchedules

sampling_schedule = AysSchedules[<span class="hljs-string">&quot;StableDiffusionXLTimesteps&quot;</span>]
<span class="hljs-built_in">print</span>(sampling_schedule)
<span class="hljs-string">&quot;[999, 845, 730, 587, 443, 310, 193, 116, 53, 13]&quot;</span>`,wrap:!1}}),_=new x({props:{code:"cGlwZWxpbmUlMjAlM0QlMjBTdGFibGVEaWZmdXNpb25YTFBpcGVsaW5lLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjAlMjJTRzE2MTIyMiUyRlJlYWxWaXNYTF9WNC4wJTIyJTJDJTBBJTIwJTIwJTIwJTIwdG9yY2hfZHR5cGUlM0R0b3JjaC5mbG9hdDE2JTJDJTBBJTIwJTIwJTIwJTIwdmFyaWFudCUzRCUyMmZwMTYlMjIlMkMlMEEpLnRvKCUyMmN1ZGElMjIpJTBBcGlwZWxpbmUuc2NoZWR1bGVyJTIwJTNEJTIwRFBNU29sdmVyTXVsdGlzdGVwU2NoZWR1bGVyLmZyb21fY29uZmlnKHBpcGVsaW5lLnNjaGVkdWxlci5jb25maWclMkMlMjBhbGdvcml0aG1fdHlwZSUzRCUyMnNkZS1kcG1zb2x2ZXIlMkIlMkIlMjIpJTBBJTBBcHJvbXB0JTIwJTNEJTIwJTIyQSUyMGNpbmVtYXRpYyUyMHNob3QlMjBvZiUyMGElMjBjdXRlJTIwbGl0dGxlJTIwcmFiYml0JTIwd2VhcmluZyUyMGElMjBqYWNrZXQlMjBhbmQlMjBkb2luZyUyMGElMjB0aHVtYnMlMjB1cCUyMiUwQWdlbmVyYXRvciUyMCUzRCUyMHRvcmNoLkdlbmVyYXRvcihkZXZpY2UlM0QlMjJjcHUlMjIpLm1hbnVhbF9zZWVkKDI0ODc4NTQ0NDYpJTBBaW1hZ2UlMjAlM0QlMjBwaXBlbGluZSglMEElMjAlMjAlMjAlMjBwcm9tcHQlM0Rwcm9tcHQlMkMlMEElMjAlMjAlMjAlMjBuZWdhdGl2ZV9wcm9tcHQlM0QlMjIlMjIlMkMlMEElMjAlMjAlMjAlMjBnZW5lcmF0b3IlM0RnZW5lcmF0b3IlMkMlMEElMjAlMjAlMjAlMjB0aW1lc3RlcHMlM0RzYW1wbGluZ19zY2hlZHVsZSUyQyUwQSkuaW1hZ2VzJTVCMCU1RA==",highlighted:`pipeline = StableDiffusionXLPipeline.from_pretrained(
    <span class="hljs-string">&quot;SG161222/RealVisXL_V4.0&quot;</span>,
    torch_dtype=torch.float16,
    variant=<span class="hljs-string">&quot;fp16&quot;</span>,
).to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipeline.scheduler = DPMSolverMultistepScheduler.from_config(pipeline.scheduler.config, algorithm_type=<span class="hljs-string">&quot;sde-dpmsolver++&quot;</span>)

prompt = <span class="hljs-string">&quot;A cinematic shot of a cute little rabbit wearing a jacket and doing a thumbs up&quot;</span>
generator = torch.Generator(device=<span class="hljs-string">&quot;cpu&quot;</span>).manual_seed(<span class="hljs-number">2487854446</span>)
image = pipeline(
    prompt=prompt,
    negative_prompt=<span class="hljs-string">&quot;&quot;</span>,
    generator=generator,
    timesteps=sampling_schedule,
).images[<span class="hljs-number">0</span>]`,wrap:!1}}),Q=new pe({props:{title:"Timestep spacing",local:"timestep-spacing",headingTag:"h2"}}),N=new x({props:{code:"aW1wb3J0JTIwdG9yY2glMEFmcm9tJTIwZGlmZnVzZXJzJTIwaW1wb3J0JTIwU3RhYmxlRGlmZnVzaW9uWExQaXBlbGluZSUyQyUyMERQTVNvbHZlck11bHRpc3RlcFNjaGVkdWxlciUwQSUwQXBpcGVsaW5lJTIwJTNEJTIwU3RhYmxlRGlmZnVzaW9uWExQaXBlbGluZS5mcm9tX3ByZXRyYWluZWQoJTBBJTIwJTIwJTIwJTIwJTIyU0cxNjEyMjIlMkZSZWFsVmlzWExfVjQuMCUyMiUyQyUwQSUyMCUyMCUyMCUyMHRvcmNoX2R0eXBlJTNEdG9yY2guZmxvYXQxNiUyQyUwQSUyMCUyMCUyMCUyMHZhcmlhbnQlM0QlMjJmcDE2JTIyJTJDJTBBKS50byglMjJjdWRhJTIyKSUwQXBpcGVsaW5lLnNjaGVkdWxlciUyMCUzRCUyMERQTVNvbHZlck11bHRpc3RlcFNjaGVkdWxlci5mcm9tX2NvbmZpZyhwaXBlbGluZS5zY2hlZHVsZXIuY29uZmlnJTJDJTIwdGltZXN0ZXBfc3BhY2luZyUzRCUyMnRyYWlsaW5nJTIyKSUwQSUwQXByb21wdCUyMCUzRCUyMCUyMkElMjBjaW5lbWF0aWMlMjBzaG90JTIwb2YlMjBhJTIwY3V0ZSUyMGxpdHRsZSUyMGJsYWNrJTIwY2F0JTIwc2l0dGluZyUyMG9uJTIwYSUyMHB1bXBraW4lMjBhdCUyMG5pZ2h0JTIyJTBBZ2VuZXJhdG9yJTIwJTNEJTIwdG9yY2guR2VuZXJhdG9yKGRldmljZSUzRCUyMmNwdSUyMikubWFudWFsX3NlZWQoMjQ4Nzg1NDQ0NiklMEFpbWFnZSUyMCUzRCUyMHBpcGVsaW5lKCUwQSUyMCUyMCUyMCUyMHByb21wdCUzRHByb21wdCUyQyUwQSUyMCUyMCUyMCUyMG5lZ2F0aXZlX3Byb21wdCUzRCUyMiUyMiUyQyUwQSUyMCUyMCUyMCUyMGdlbmVyYXRvciUzRGdlbmVyYXRvciUyQyUwQSUyMCUyMCUyMCUyMG51bV9pbmZlcmVuY2Vfc3RlcHMlM0Q1JTJDJTBBKS5pbWFnZXMlNUIwJTVEJTBBaW1hZ2U=",highlighted:`<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> StableDiffusionXLPipeline, DPMSolverMultistepScheduler

pipeline = StableDiffusionXLPipeline.from_pretrained(
    <span class="hljs-string">&quot;SG161222/RealVisXL_V4.0&quot;</span>,
    torch_dtype=torch.float16,
    variant=<span class="hljs-string">&quot;fp16&quot;</span>,
).to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipeline.scheduler = DPMSolverMultistepScheduler.from_config(pipeline.scheduler.config, timestep_spacing=<span class="hljs-string">&quot;trailing&quot;</span>)

prompt = <span class="hljs-string">&quot;A cinematic shot of a cute little black cat sitting on a pumpkin at night&quot;</span>
generator = torch.Generator(device=<span class="hljs-string">&quot;cpu&quot;</span>).manual_seed(<span class="hljs-number">2487854446</span>)
image = pipeline(
    prompt=prompt,
    negative_prompt=<span class="hljs-string">&quot;&quot;</span>,
    generator=generator,
    num_inference_steps=<span class="hljs-number">5</span>,
).images[<span class="hljs-number">0</span>]
image`,wrap:!1}}),Y=new pe({props:{title:"Sigmas",local:"sigmas",headingTag:"h2"}}),D=new x({props:{code:"aW1wb3J0JTIwdG9yY2glMEElMEFmcm9tJTIwZGlmZnVzZXJzJTIwaW1wb3J0JTIwRGlmZnVzaW9uUGlwZWxpbmUlMkMlMjBFdWxlckRpc2NyZXRlU2NoZWR1bGVyJTBBJTBBbW9kZWxfaWQlMjAlM0QlMjAlMjJzdGFiaWxpdHlhaSUyRnN0YWJsZS1kaWZmdXNpb24teGwtYmFzZS0xLjAlMjIlMEFwaXBlbGluZSUyMCUzRCUyMERpZmZ1c2lvblBpcGVsaW5lLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjJzdGFiaWxpdHlhaSUyRnN0YWJsZS1kaWZmdXNpb24teGwtYmFzZS0xLjAlMjIlMkMlMEElMjAlMjB0b3JjaF9kdHlwZSUzRHRvcmNoLmZsb2F0MTYlMkMlMEElMjAlMjB2YXJpYW50JTNEJTIyZnAxNiUyMiUyQyUwQSkudG8oJTIyY3VkYSUyMiklMEFwaXBlbGluZS5zY2hlZHVsZXIlMjAlM0QlMjBFdWxlckRpc2NyZXRlU2NoZWR1bGVyLmZyb21fY29uZmlnKHBpcGVsaW5lLnNjaGVkdWxlci5jb25maWcpJTBBJTBBc2lnbWFzJTIwJTNEJTIwJTVCMTQuNjE1JTJDJTIwNi4zMTUlMkMlMjAzLjc3MSUyQyUyMDIuMTgxJTJDJTIwMS4zNDIlMkMlMjAwLjg2MiUyQyUyMDAuNTU1JTJDJTIwMC4zODAlMkMlMjAwLjIzNCUyQyUyMDAuMTEzJTJDJTIwMC4wJTVEJTBBcHJvbXB0JTIwJTNEJTIwJTIyYW50aHJvcG9tb3JwaGljJTIwY2FweWJhcmElMjB3ZWFyaW5nJTIwYSUyMHN1aXQlMjBhbmQlMjB3b3JraW5nJTIwd2l0aCUyMGElMjBjb21wdXRlciUyMiUwQWdlbmVyYXRvciUyMCUzRCUyMHRvcmNoLkdlbmVyYXRvcihkZXZpY2UlM0QnY3VkYScpLm1hbnVhbF9zZWVkKDEyMyklMEFpbWFnZSUyMCUzRCUyMHBpcGVsaW5lKCUwQSUyMCUyMCUyMCUyMHByb21wdCUzRHByb21wdCUyQyUwQSUyMCUyMCUyMCUyMG51bV9pbmZlcmVuY2Vfc3RlcHMlM0QxMCUyQyUwQSUyMCUyMCUyMCUyMHNpZ21hcyUzRHNpZ21hcyUyQyUwQSUyMCUyMCUyMCUyMGdlbmVyYXRvciUzRGdlbmVyYXRvciUwQSkuaW1hZ2VzJTVCMCU1RA==",highlighted:`<span class="hljs-keyword">import</span> torch

<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> DiffusionPipeline, EulerDiscreteScheduler

model_id = <span class="hljs-string">&quot;stabilityai/stable-diffusion-xl-base-1.0&quot;</span>
pipeline = DiffusionPipeline.from_pretrained(
  <span class="hljs-string">&quot;stabilityai/stable-diffusion-xl-base-1.0&quot;</span>,
  torch_dtype=torch.float16,
  variant=<span class="hljs-string">&quot;fp16&quot;</span>,
).to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipeline.scheduler = EulerDiscreteScheduler.from_config(pipeline.scheduler.config)

sigmas = [<span class="hljs-number">14.615</span>, <span class="hljs-number">6.315</span>, <span class="hljs-number">3.771</span>, <span class="hljs-number">2.181</span>, <span class="hljs-number">1.342</span>, <span class="hljs-number">0.862</span>, <span class="hljs-number">0.555</span>, <span class="hljs-number">0.380</span>, <span class="hljs-number">0.234</span>, <span class="hljs-number">0.113</span>, <span class="hljs-number">0.0</span>]
prompt = <span class="hljs-string">&quot;anthropomorphic capybara wearing a suit and working with a computer&quot;</span>
generator = torch.Generator(device=<span class="hljs-string">&#x27;cuda&#x27;</span>).manual_seed(<span class="hljs-number">123</span>)
image = pipeline(
    prompt=prompt,
    num_inference_steps=<span class="hljs-number">10</span>,
    sigmas=sigmas,
    generator=generator
).images[<span class="hljs-number">0</span>]`,wrap:!1}}),L=new x({props:{code:"cHJpbnQoZiUyMiUyMHRpbWVzdGVwcyUzQSUyMCU3QnBpcGUuc2NoZWR1bGVyLnRpbWVzdGVwcyU3RCUyMiklMEElMjJ0aW1lc3RlcHMlM0ElMjB0ZW5zb3IoJTVCOTk5LiUyQyUyMDg0NS4lMkMlMjA3MzAuJTJDJTIwNTg3LiUyQyUyMDQ0My4lMkMlMjAzMTAuJTJDJTIwMTkzLiUyQyUyMDExNi4lMkMlMjAlMjA1My4lMkMlMjAlMjAxMy4lNUQlMkMlMjBkZXZpY2UlM0QnY3VkYSUzQTAnKSUyMg==",highlighted:`<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot; timesteps: <span class="hljs-subst">{pipe.scheduler.timesteps}</span>&quot;</span>)
<span class="hljs-string">&quot;timesteps: tensor([999., 845., 730., 587., 443., 310., 193., 116.,  53.,  13.], device=&#x27;cuda:0&#x27;)&quot;</span>`,wrap:!1}}),F=new pe({props:{title:"Karras sigmas",local:"karras-sigmas",headingTag:"h3"}}),v=new qe({props:{warning:!1,$$slots:{default:[Wt]},$$scope:{ctx:U}}}),K=new x({props:{code:"aW1wb3J0JTIwdG9yY2glMEFmcm9tJTIwZGlmZnVzZXJzJTIwaW1wb3J0JTIwU3RhYmxlRGlmZnVzaW9uWExQaXBlbGluZSUyQyUyMERQTVNvbHZlck11bHRpc3RlcFNjaGVkdWxlciUwQSUwQXBpcGVsaW5lJTIwJTNEJTIwU3RhYmxlRGlmZnVzaW9uWExQaXBlbGluZS5mcm9tX3ByZXRyYWluZWQoJTBBJTIwJTIwJTIwJTIwJTIyU0cxNjEyMjIlMkZSZWFsVmlzWExfVjQuMCUyMiUyQyUwQSUyMCUyMCUyMCUyMHRvcmNoX2R0eXBlJTNEdG9yY2guZmxvYXQxNiUyQyUwQSUyMCUyMCUyMCUyMHZhcmlhbnQlM0QlMjJmcDE2JTIyJTJDJTBBKS50byglMjJjdWRhJTIyKSUwQXBpcGVsaW5lLnNjaGVkdWxlciUyMCUzRCUyMERQTVNvbHZlck11bHRpc3RlcFNjaGVkdWxlci5mcm9tX2NvbmZpZyhwaXBlbGluZS5zY2hlZHVsZXIuY29uZmlnJTJDJTIwYWxnb3JpdGhtX3R5cGUlM0QlMjJzZGUtZHBtc29sdmVyJTJCJTJCJTIyJTJDJTIwdXNlX2thcnJhc19zaWdtYXMlM0RUcnVlKSUwQSUwQXByb21wdCUyMCUzRCUyMCUyMkElMjBjaW5lbWF0aWMlMjBzaG90JTIwb2YlMjBhJTIwY3V0ZSUyMGxpdHRsZSUyMHJhYmJpdCUyMHdlYXJpbmclMjBhJTIwamFja2V0JTIwYW5kJTIwZG9pbmclMjBhJTIwdGh1bWJzJTIwdXAlMjIlMEFnZW5lcmF0b3IlMjAlM0QlMjB0b3JjaC5HZW5lcmF0b3IoZGV2aWNlJTNEJTIyY3B1JTIyKS5tYW51YWxfc2VlZCgyNDg3ODU0NDQ2KSUwQWltYWdlJTIwJTNEJTIwcGlwZWxpbmUoJTBBJTIwJTIwJTIwJTIwcHJvbXB0JTNEcHJvbXB0JTJDJTBBJTIwJTIwJTIwJTIwbmVnYXRpdmVfcHJvbXB0JTNEJTIyJTIyJTJDJTBBJTIwJTIwJTIwJTIwZ2VuZXJhdG9yJTNEZ2VuZXJhdG9yJTJDJTBBKS5pbWFnZXMlNUIwJTVE",highlighted:`<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> StableDiffusionXLPipeline, DPMSolverMultistepScheduler

pipeline = StableDiffusionXLPipeline.from_pretrained(
    <span class="hljs-string">&quot;SG161222/RealVisXL_V4.0&quot;</span>,
    torch_dtype=torch.float16,
    variant=<span class="hljs-string">&quot;fp16&quot;</span>,
).to(<span class="hljs-string">&quot;cuda&quot;</span>)
pipeline.scheduler = DPMSolverMultistepScheduler.from_config(pipeline.scheduler.config, algorithm_type=<span class="hljs-string">&quot;sde-dpmsolver++&quot;</span>, use_karras_sigmas=<span class="hljs-literal">True</span>)

prompt = <span class="hljs-string">&quot;A cinematic shot of a cute little rabbit wearing a jacket and doing a thumbs up&quot;</span>
generator = torch.Generator(device=<span class="hljs-string">&quot;cpu&quot;</span>).manual_seed(<span class="hljs-number">2487854446</span>)
image = pipeline(
    prompt=prompt,
    negative_prompt=<span class="hljs-string">&quot;&quot;</span>,
    generator=generator,
).images[<span class="hljs-number">0</span>]`,wrap:!1}}),O=new pe({props:{title:"Rescale noise schedule",local:"rescale-noise-schedule",headingTag:"h2"}}),W=new qe({props:{warning:!1,$$slots:{default:[$t]},$$scope:{ctx:U}}}),ae=new x({props:{code:"ZnJvbSUyMGRpZmZ1c2VycyUyMGltcG9ydCUyMERpZmZ1c2lvblBpcGVsaW5lJTJDJTIwRERJTVNjaGVkdWxlciUwQSUwQXBpcGVsaW5lJTIwJTNEJTIwRGlmZnVzaW9uUGlwZWxpbmUuZnJvbV9wcmV0cmFpbmVkKCUyMnB0eDAlMkZwc2V1ZG8tam91cm5leS12MiUyMiUyQyUyMHVzZV9zYWZldGVuc29ycyUzRFRydWUpJTBBJTBBcGlwZWxpbmUuc2NoZWR1bGVyJTIwJTNEJTIwRERJTVNjaGVkdWxlci5mcm9tX2NvbmZpZyglMEElMjAlMjAlMjAlMjBwaXBlbGluZS5zY2hlZHVsZXIuY29uZmlnJTJDJTIwcmVzY2FsZV9iZXRhc196ZXJvX3NuciUzRFRydWUlMkMlMjB0aW1lc3RlcF9zcGFjaW5nJTNEJTIydHJhaWxpbmclMjIlMEEpJTBBcGlwZWxpbmUudG8oJTIyY3VkYSUyMiklMEFwcm9tcHQlMjAlM0QlMjAlMjJjaW5lbWF0aWMlMjBwaG90byUyMG9mJTIwYSUyMHNub3d5JTIwbW91bnRhaW4lMjBhdCUyMG5pZ2h0JTIwd2l0aCUyMHRoZSUyMG5vcnRoZXJuJTIwbGlnaHRzJTIwYXVyb3JhJTIwYm9yZWFsaXMlMjBvdmVyaGVhZCUyQyUyMDM1bW0lMjBwaG90b2dyYXBoJTJDJTIwZmlsbSUyQyUyMHByb2Zlc3Npb25hbCUyQyUyMDRrJTJDJTIwaGlnaGx5JTIwZGV0YWlsZWQlMjIlMEFnZW5lcmF0b3IlMjAlM0QlMjB0b3JjaC5HZW5lcmF0b3IoZGV2aWNlJTNEJTIyY3B1JTIyKS5tYW51YWxfc2VlZCgyMyklMEFpbWFnZSUyMCUzRCUyMHBpcGVsaW5lKHByb21wdCUyQyUyMGd1aWRhbmNlX3Jlc2NhbGUlM0QwLjclMkMlMjBnZW5lcmF0b3IlM0RnZW5lcmF0b3IpLmltYWdlcyU1QjAlNUQlMEFpbWFnZQ==",highlighted:`<span class="hljs-keyword">from</span> diffusers <span class="hljs-keyword">import</span> DiffusionPipeline, DDIMScheduler

pipeline = DiffusionPipeline.from_pretrained(<span class="hljs-string">&quot;ptx0/pseudo-journey-v2&quot;</span>, use_safetensors=<span class="hljs-literal">True</span>)

pipeline.scheduler = DDIMScheduler.from_config(
    pipeline.scheduler.config, rescale_betas_zero_snr=<span class="hljs-literal">True</span>, timestep_spacing=<span class="hljs-string">&quot;trailing&quot;</span>
)
pipeline.to(<span class="hljs-string">&quot;cuda&quot;</span>)
prompt = <span class="hljs-string">&quot;cinematic photo of a snowy mountain at night with the northern lights aurora borealis overhead, 35mm photograph, film, professional, 4k, highly detailed&quot;</span>
generator = torch.Generator(device=<span class="hljs-string">&quot;cpu&quot;</span>).manual_seed(<span class="hljs-number">23</span>)
image = pipeline(prompt, guidance_rescale=<span class="hljs-number">0.7</span>, generator=generator).images[<span class="hljs-number">0</span>]
image`,wrap:!1}}),ie=new vt({props:{source:"https://github.com/huggingface/diffusers/blob/main/docs/source/en/using-diffusers/scheduler_features.md"}}),{c(){n=r("meta"),J=a(),u=r("p"),m=a(),d(T.$$.fragment),p=a(),w=r("p"),w.textContent=Fe,ce=a(),B=r("p"),B.textContent=Ae,oe=a(),d(b.$$.fragment),me=a(),d(G.$$.fragment),ue=a(),C=r("p"),C.textContent=Pe,de=a(),V=r("p"),V.innerHTML=Ke,he=a(),d(R.$$.fragment),Me=a(),S=r("p"),S.innerHTML=Oe,fe=a(),d(_.$$.fragment),ye=a(),j=r("div"),j.innerHTML=et,ge=a(),d(Q.$$.fragment),Te=a(),k=r("p"),k.innerHTML=tt,we=a(),H=r("ul"),H.innerHTML=st,Je=a(),X=r("p"),X.innerHTML=lt,Ue=a(),d(N.$$.fragment),be=a(),Z=r("div"),Z.innerHTML=at,je=a(),d(Y.$$.fragment),Ze=a(),E=r("p"),E.innerHTML=it,ve=a(),z=r("p"),z.innerHTML=nt,Ie=a(),d(D.$$.fragment),We=a(),q=r("p"),q.innerHTML=pt,$e=a(),d(L.$$.fragment),xe=a(),d(F.$$.fragment),Be=a(),d(v.$$.fragment),Ge=a(),A=r("p"),A.innerHTML=rt,Ce=a(),P=r("p"),P.innerHTML=ct,Ve=a(),d(K.$$.fragment),Re=a(),I=r("div"),I.innerHTML=ot,Se=a(),d(O.$$.fragment),_e=a(),ee=r("p"),ee.innerHTML=mt,Qe=a(),d(W.$$.fragment),ke=a(),te=r("p"),te.innerHTML=ut,He=a(),se=r("ul"),se.innerHTML=dt,Xe=a(),le=r("p"),le.innerHTML=ht,Ne=a(),d(ae.$$.fragment),Ye=a(),$=r("div"),$.innerHTML=Mt,Ee=a(),d(ie.$$.fragment),ze=a(),re=r("p"),this.h()},l(e){const t=jt("svelte-u9bgzb",document.head);n=c(t,"META",{name:!0,content:!0}),t.forEach(s),J=i(e),u=c(e,"P",{}),Tt(u).forEach(s),m=i(e),h(T.$$.fragment,e),p=i(e),w=c(e,"P",{"data-svelte-h":!0}),o(w)!=="svelte-1isuw1i"&&(w.textContent=Fe),ce=i(e),B=c(e,"P",{"data-svelte-h":!0}),o(B)!=="svelte-1l3yyn3"&&(B.textContent=Ae),oe=i(e),h(b.$$.fragment,e),me=i(e),h(G.$$.fragment,e),ue=i(e),C=c(e,"P",{"data-svelte-h":!0}),o(C)!=="svelte-dn9g4h"&&(C.textContent=Pe),de=i(e),V=c(e,"P",{"data-svelte-h":!0}),o(V)!=="svelte-1d6178p"&&(V.innerHTML=Ke),he=i(e),h(R.$$.fragment,e),Me=i(e),S=c(e,"P",{"data-svelte-h":!0}),o(S)!=="svelte-17et4f1"&&(S.innerHTML=Oe),fe=i(e),h(_.$$.fragment,e),ye=i(e),j=c(e,"DIV",{class:!0,"data-svelte-h":!0}),o(j)!=="svelte-1wwk2vr"&&(j.innerHTML=et),ge=i(e),h(Q.$$.fragment,e),Te=i(e),k=c(e,"P",{"data-svelte-h":!0}),o(k)!=="svelte-qlgx89"&&(k.innerHTML=tt),we=i(e),H=c(e,"UL",{"data-svelte-h":!0}),o(H)!=="svelte-iba8ru"&&(H.innerHTML=st),Je=i(e),X=c(e,"P",{"data-svelte-h":!0}),o(X)!=="svelte-xqwul8"&&(X.innerHTML=lt),Ue=i(e),h(N.$$.fragment,e),be=i(e),Z=c(e,"DIV",{class:!0,"data-svelte-h":!0}),o(Z)!=="svelte-106qvjp"&&(Z.innerHTML=at),je=i(e),h(Y.$$.fragment,e),Ze=i(e),E=c(e,"P",{"data-svelte-h":!0}),o(E)!=="svelte-1v7gnu4"&&(E.innerHTML=it),ve=i(e),z=c(e,"P",{"data-svelte-h":!0}),o(z)!=="svelte-1qygm3g"&&(z.innerHTML=nt),Ie=i(e),h(D.$$.fragment,e),We=i(e),q=c(e,"P",{"data-svelte-h":!0}),o(q)!=="svelte-wa4ie3"&&(q.innerHTML=pt),$e=i(e),h(L.$$.fragment,e),xe=i(e),h(F.$$.fragment,e),Be=i(e),h(v.$$.fragment,e),Ge=i(e),A=c(e,"P",{"data-svelte-h":!0}),o(A)!=="svelte-r7q280"&&(A.innerHTML=rt),Ce=i(e),P=c(e,"P",{"data-svelte-h":!0}),o(P)!=="svelte-1x9rkdg"&&(P.innerHTML=ct),Ve=i(e),h(K.$$.fragment,e),Re=i(e),I=c(e,"DIV",{class:!0,"data-svelte-h":!0}),o(I)!=="svelte-gruv4r"&&(I.innerHTML=ot),Se=i(e),h(O.$$.fragment,e),_e=i(e),ee=c(e,"P",{"data-svelte-h":!0}),o(ee)!=="svelte-ufxjw"&&(ee.innerHTML=mt),Qe=i(e),h(W.$$.fragment,e),ke=i(e),te=c(e,"P",{"data-svelte-h":!0}),o(te)!=="svelte-170k09z"&&(te.innerHTML=ut),He=i(e),se=c(e,"UL",{"data-svelte-h":!0}),o(se)!=="svelte-1dozvyr"&&(se.innerHTML=dt),Xe=i(e),le=c(e,"P",{"data-svelte-h":!0}),o(le)!=="svelte-158nvmg"&&(le.innerHTML=ht),Ne=i(e),h(ae.$$.fragment,e),Ye=i(e),$=c(e,"DIV",{class:!0,"data-svelte-h":!0}),o($)!=="svelte-2pxhst"&&($.innerHTML=Mt),Ee=i(e),h(ie.$$.fragment,e),ze=i(e),re=c(e,"P",{}),Tt(re).forEach(s),this.h()},h(){ne(n,"name","hf:doc:metadata"),ne(n,"content",Bt),ne(j,"class","flex gap-4"),ne(Z,"class","flex gap-4"),ne(I,"class","flex gap-4"),ne($,"class","flex gap-4")},m(e,t){Zt(document.head,n),l(e,J,t),l(e,u,t),l(e,m,t),M(T,e,t),l(e,p,t),l(e,w,t),l(e,ce,t),l(e,B,t),l(e,oe,t),M(b,e,t),l(e,me,t),M(G,e,t),l(e,ue,t),l(e,C,t),l(e,de,t),l(e,V,t),l(e,he,t),M(R,e,t),l(e,Me,t),l(e,S,t),l(e,fe,t),M(_,e,t),l(e,ye,t),l(e,j,t),l(e,ge,t),M(Q,e,t),l(e,Te,t),l(e,k,t),l(e,we,t),l(e,H,t),l(e,Je,t),l(e,X,t),l(e,Ue,t),M(N,e,t),l(e,be,t),l(e,Z,t),l(e,je,t),M(Y,e,t),l(e,Ze,t),l(e,E,t),l(e,ve,t),l(e,z,t),l(e,Ie,t),M(D,e,t),l(e,We,t),l(e,q,t),l(e,$e,t),M(L,e,t),l(e,xe,t),M(F,e,t),l(e,Be,t),M(v,e,t),l(e,Ge,t),l(e,A,t),l(e,Ce,t),l(e,P,t),l(e,Ve,t),M(K,e,t),l(e,Re,t),l(e,I,t),l(e,Se,t),M(O,e,t),l(e,_e,t),l(e,ee,t),l(e,Qe,t),M(W,e,t),l(e,ke,t),l(e,te,t),l(e,He,t),l(e,se,t),l(e,Xe,t),l(e,le,t),l(e,Ne,t),M(ae,e,t),l(e,Ye,t),l(e,$,t),l(e,Ee,t),M(ie,e,t),l(e,ze,t),l(e,re,t),De=!0},p(e,[t]){const ft={};t&2&&(ft.$$scope={dirty:t,ctx:e}),b.$set(ft);const yt={};t&2&&(yt.$$scope={dirty:t,ctx:e}),v.$set(yt);const gt={};t&2&&(gt.$$scope={dirty:t,ctx:e}),W.$set(gt)},i(e){De||(f(T.$$.fragment,e),f(b.$$.fragment,e),f(G.$$.fragment,e),f(R.$$.fragment,e),f(_.$$.fragment,e),f(Q.$$.fragment,e),f(N.$$.fragment,e),f(Y.$$.fragment,e),f(D.$$.fragment,e),f(L.$$.fragment,e),f(F.$$.fragment,e),f(v.$$.fragment,e),f(K.$$.fragment,e),f(O.$$.fragment,e),f(W.$$.fragment,e),f(ae.$$.fragment,e),f(ie.$$.fragment,e),De=!0)},o(e){y(T.$$.fragment,e),y(b.$$.fragment,e),y(G.$$.fragment,e),y(R.$$.fragment,e),y(_.$$.fragment,e),y(Q.$$.fragment,e),y(N.$$.fragment,e),y(Y.$$.fragment,e),y(D.$$.fragment,e),y(L.$$.fragment,e),y(F.$$.fragment,e),y(v.$$.fragment,e),y(K.$$.fragment,e),y(O.$$.fragment,e),y(W.$$.fragment,e),y(ae.$$.fragment,e),y(ie.$$.fragment,e),De=!1},d(e){e&&(s(J),s(u),s(m),s(p),s(w),s(ce),s(B),s(oe),s(me),s(ue),s(C),s(de),s(V),s(he),s(Me),s(S),s(fe),s(ye),s(j),s(ge),s(Te),s(k),s(we),s(H),s(Je),s(X),s(Ue),s(be),s(Z),s(je),s(Ze),s(E),s(ve),s(z),s(Ie),s(We),s(q),s($e),s(xe),s(Be),s(Ge),s(A),s(Ce),s(P),s(Ve),s(Re),s(I),s(Se),s(_e),s(ee),s(Qe),s(ke),s(te),s(He),s(se),s(Xe),s(le),s(Ne),s(Ye),s($),s(Ee),s(ze),s(re)),s(n),g(T,e),g(b,e),g(G,e),g(R,e),g(_,e),g(Q,e),g(N,e),g(Y,e),g(D,e),g(L,e),g(F,e),g(v,e),g(K,e),g(O,e),g(W,e),g(ae,e),g(ie,e)}}}const Bt='{"title":"Scheduler features","local":"scheduler-features","sections":[{"title":"Timestep schedules","local":"timestep-schedules","sections":[],"depth":2},{"title":"Timestep spacing","local":"timestep-spacing","sections":[],"depth":2},{"title":"Sigmas","local":"sigmas","sections":[{"title":"Karras sigmas","local":"karras-sigmas","sections":[],"depth":3}],"depth":2},{"title":"Rescale noise schedule","local":"rescale-noise-schedule","sections":[],"depth":2}],"depth":1}';function Gt(U){return Jt(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Qt extends Ut{constructor(n){super(),bt(this,n,Gt,xt,wt,{})}}export{Qt as component};
